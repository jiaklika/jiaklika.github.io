<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">
<meta name="keywords" content="通向财务自由之路">
<meta property="og:type" content="article">
<meta property="og:title" content="第9章 入市或市场时机选择">
<meta property="og:url" content="http://yoursite.com/2021/07/27/第9章-入市或市场时机选择/index.html">
<meta property="og:site_name" content="车斌的技术博客">
<meta property="og:description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-11-05T07:46:44.049Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第9章 入市或市场时机选择">
<meta name="twitter:description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">






  <link rel="canonical" href="http://yoursite.com/2021/07/27/第9章-入市或市场时机选择/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>第9章 入市或市场时机选择 | 车斌的技术博客</title><meta name="robots" content="noindex">
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">车斌的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">放弃会成为一种习惯</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/27/第9章-入市或市场时机选择/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CheBin">
      <meta itemprop="description" content="看视频才能学会，看文字学不会的">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="车斌的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第9章 入市或市场时机选择

              
            
          </h1>
        

        <div class="post-meta">

          

          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2021-07-27 11:30:18" itemprop="dateCreated datePublished" datetime="2021-07-27T11:30:18+08:00">2021-07-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2021-11-05 15:46:44" itemprop="dateModified" datetime="2021-11-05T15:46:44+08:00">2021-11-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/期货/" itemprop="url" rel="index"><span itemprop="name">期货</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">20k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">19 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>思考并回答以下问题：</p>
<ul>
<li>总结一下，这章作者最主要想表达什么观点？</li>
</ul>
<a id="more"></a>
<p>回避错误让人愚蠢，而一味地追求正确则让你落伍。——罗伯特·清崎（《富爸爸穷爸爸》作者）</p>
<p>大多数人认为，利用入市信号的基本目的是提高在市场中进行时机选择的能力，从而提高系统的可靠度。我估计有95%甚至更多的人努力设计交易系统都只是为了找到一个极好的入市信号。事实上，交易商总是告诉我，他们的短期系统的可靠度都能达到60%或者更高，然而，很多时候却百思不得其解，为什么系统赚不到钱。除非你是从本章开始看起的，否则应该知道，一个系统即使有很高的成功概率，但其期望收益仍然可能是负的。赚钱的关键是拥有一个期望收益为正且比较高的系统，以及使用一个能够利用这一期望收益又让你留在市场中的头寸规模确定模型。入市只占赚钱游戏的一小部分。尽管如此，你还是要花费一些精力来寻找适合你的目标的信号，对此，有两种寻找的途径。</p>
<p>第一种途径是假定可靠度占有一定的重要性，然后寻找比随机入市要好的信号。事实上，有很多书就认为挑选好的股票就是在股市中发财的全部要诀，它们都冠以类似以下的书名：《怎样明智地买股票)、《股票选择：击败市场的11种最佳战术》、《怎样买股票》、《像专家一样挑选股票》以及《如何购买技术股》。在本章中，我们也假定可靠度是入市信号的一个重要的标准，进而讨论一些潜在的很好的入市信号。</p>
<p>第二种途径是不去关注可靠度，而是集中精力寻找有潜力给你带来具有较高R乘数的成功交易的人市信号。这一途径完全不同于第一种途径，因为对于赚取高额利润来说什么是重要的，它做出了截然不同的假定。虽然两种方法都是有效的，但是第二种方法有可能完全改变人们看待交易的方式。</p>
<p>那些学习了我的顶级业绩课程的读者应该知道潜步追踪市场的重要性。潜步追踪就是一直等待最佳时机入市从而将风险降到最小。例如，猎豹是世界上跑得最快的动物，尽管它可以跑得极快，但是它并不必须这样做。实际上，猎豹会一直等到一个虚弱的、病腿的、年幼的或者年老的动物靠近了才行动。猎豹这样做，只需较少的力气就可以捕捉到动物。这就是你在入市技巧中需要做到的。对于很多人来说，潜步追踪就等于是缩小时间框架，选定最佳时机扑向你的“猎物”。</p>
<p>本章分成四个部分。第一部分与随机入市和旨在将可靠度提高到随机入市之上的研究有关；第二部分讨论了一些能满足上面所说的两种假定之一的普通技巧；第三部分是设计你自己的入市信号；第四部分继续讨论一些具体的系统，并且给出了在这些众所周知的系统中使用的一些入市技巧，既包括用于股票市场的，也包括用于杠杆作用更强的市场的。</p>
<p>为了避免让你信服某些方法的有效性，我会尽量回避阐述很多最佳情形的案例。这样的策略会吸引你的某些自然的偏好和心理上的弱点，但我认为这样做最多是不公正而已。因此，如果你使用本章所推荐的任何方法，我建议你自己对它进行充分的检验，这样做是让这些方法成为你自己的，以及让你在使用时感到舒服和自信。适合你的系统是你唯一可以进行交易的系统，为了把这一系统变成你自己的，对该系统进行充分的自我检验是你需要完成的一部分工作。</p>
<h1 id="努力击败随机入市"><a href="#努力击败随机入市" class="headerlink" title="努力击败随机入市"></a><span style="color:#339AFF;">努力击败随机入市</span></h1><p>在1991年，我与市场奇才汤姆·巴索曾举办过一次研讨班（见第3章和第5章，他编写的部分）。汤姆当时解释说，他的系统中最重要的部分是退出市场策略和头寸规模确定法则。结果，有一位听众问他：根据你的说法，听起来好像是只要拥有好的退出市场的策略，能够明智地调整头寸，你就可以仅凭随机入市而不断地赚到钱？汤姆回答说也许能。他立即返回办公室，利用“拽硬币”随机入市来检验系统的退出策略和头寸规模确定法则。也就是说，他的系统模仿了四个不同的市场交易，而基于随机的入市信号，他要么做多头，要么做空头，一直在市场中。一旦得到一个退出市场的信号，就会基于随机的信号再次入市。汤姆检验的结果表明他可以不断地赚到钱，即使他每笔期货合约因为价格差异和佣金要付出100美元的成本。</p>
<p>我们随后又在更多的市场上重复了这些结果，我把它们发表在我的一期通讯报道中，并做了几期访谈节目。我们的系统非常简单，用了平均实际波幅的一个10天的指数移动平均来确定市场的波动性，初始止损是这一波动性得数的3倍。每次凭掷硬币随机进入市场，在该笔交易完成后，就开始跟踪3倍于波动性的止损。然而，止损可能只按照对我们有利的方式移动。因此，每当市场以对我们有利的方式移动或波动性缩小时，止损就移动得更近了。我们还在头寸规模确定系统中使用了1%的风险模型，见第14章的介绍。</p>
<p>就是这样！这就是我们系统的全部——一个随机入市，加上一个3倍于波动性的追踪止损，再加上一个1%的风险法则来确定头寸规模。我们在10个市场上运行了这一系统，在每一个市场上，是做空头还是多头，一直都是凭掷硬币来随机决定的。这也是对系统开发中的简单易行的好处很好的阐释。</p>
<p>每当运行一个随机入市系统时，都会得到不同的结果。当你在每个期货市场只进行一笔合约的交易时，该系统在运行中有80%的机会是赚钱的（在10年里10个市场上）。在我加入一个简单的1%风险的资金管理系统后，该系统在100%的时间里是赚钱的。尽管回报不是很高，但是在随机入市和满足必须一直待在市场里的前提下，在100%的时间里赚钱也是非常令人激动的，该系统的可靠度只有38%，大约相当于趋势跟踪系统的平均水平。</p>
<h2 id="勒博和卢卡斯的研究"><a href="#勒博和卢卡斯的研究" class="headerlink" title="勒博和卢卡斯的研究"></a><span style="color:#00ACC1;">勒博和卢卡斯的研究</span></h2><p>查克·勒博和大卫·卢卡斯在他们的书《技术交易商期货市场计算机分析指南》中对入市做了一些非凡的研究工作。他们在做历史性检验时，使用了各种类型的入市信号来进入市场，使用的唯一的退出市场策略是在5天、10天、15天和20天后交易结束之时。他们使用这一方法主要是来确定其交易有百分之多少是赚钱的以及这一百分比是否超过了从随机入市中可以期望的比例。结果，大多数指标的表现都没能胜过随机——包括非常流行的所有的摇摆指数和各种移动平均交叉组合指数（如果你的时间框架是一天或更短（比如一个在第二天开盘时就退出市场的计划），找到一个可靠度在50%以上的人市系统要比找到一个长期可靠的退出系统容易得多。）。</p>
<p>在20天后，如果市场进入的可靠度在60%或者更高，看起来就非常有希望，但是，如果退出市场的唯一策略是在这么多天之后收盘时抛空头寸，那么你就很有可能遭到灾难性的损失。你必须利用保护性的止损来保护自己免受这些损失。然而，如果你这么做，就会降低入市信号的可靠度-有些信号降到止损点以下（不管止损点是什么），然后又返回并变得可以获利，除非你已经退出了市场。此外，每当你加进任何形式的追踪止损（来降低初始风险并获取利润），都会进一步降低入市的可靠度。为什么？因为有些旨在降低初始风险的止损指令会被执行，结果你就会承担损失、退出市场。这就是为什么一个好的趋势跟踪系统的可靠度通常都低于50%的原因。</p>
<h1 id="常见的入市技巧"><a href="#常见的入市技巧" class="headerlink" title="常见的入市技巧"></a><span style="color:#339AFF;">常见的入市技巧</span></h1><p>大多数人只用很少几种入市方法进行交易或投资。在以下部分，我们将讨论一些最常见的入市技巧以及它们的用处。</p>
<h2 id="管道突破点"><a href="#管道突破点" class="headerlink" title="管道突破点"></a><span style="color:#00ACC1;">管道突破点</span></h2><p>假如你作为一位趋势跟踪者，目标是永不错过市场中一个大的趋势，那么你会用什么样的入市信号呢？对这一问题的回答通常就是使用我们称为“管道突破点的入市信号。基本上，你要么在最近 天的最高价中的最高点上入市做多头，要么在最近X天的最低价中的最低点上入市做空头。如果市场呈上涨趋势，那么它会创造新高。如果进入了这些新的最高点之一，你将不会错过一个上涨的趋势。类似地，如果在一个新的最低点上入市做空头，那么你将不会错过一个下跌的趋势。图9-1描述了一个在呈上涨趋势的市场上使用的40天管道突破点的例子。图中有很多突破点，但是最清晰的一个发生在8月2日。</p>
<blockquote>
<p>图9-1 8月2日发生的40天管道突破点</p>
</blockquote>

<p>就图9-1而言，管道的说法是有误导性的。管道是指市场一直沿着一个窄小的范围移动了数天之后，突然在上涨的方向或下跌的方向发生了突破。显然，这种入市技巧能够很好地捕捉这种类型的市场移动。然而，你需要知道的是这个管道有多长以及管道运动是何时开始的。</p>
<p>这就引出了与管道突破有关的最为重要的问题——一个趋势在我决定赶上之前，它应该表明有多长？对这一问题的回答决定了产生你要进入的最高点或最低点所需要的天数。</p>
<p>管道突破点技巧最初由唐奇安在20世纪60年代提出，后来被一群称为“乌龟”的交易商推而广之，他们利用这一入市技巧进行商品交易赚了数十亿美元（尽管“乌龟”们的交易利用了管道突破点系统，但是，像通常的情形一样，他们的成功更多地和他们的头寸规模确定法则有关。）。最初在一个20天的突破点入市非常成功，但是随着他们继续使用这一方法，20天的突破点不再像以往那样有效，于是他们就上移到了40天的突破点。</p>
<p>今天，研究似乎表明40～100多天的突破点使用起来仍然相当有效，包含较少天数的突破点就没有那么有效了，除非你是在做空头，因为熊市一般都会出现迅速的、剧烈的移动，它们可能需要一个迅速得多的入市信号。</p>
<p>这一技巧应用起来很简单。你可以描出每日的最高点和最低点，在市场出现一个比过去20天中任何一天的最高点还要高的最高点时，就入市做多头；而在市场出现最近20天以来的最低的最低点时，就入市做空头。表9-1描述了这一技巧的使用过程，它给出了1995年年初60天的玉米价格，新的20天价格最高点在图中都用粗体数字表示出来。每一个粗体数字表示的价格都是一个入市目标或实际的入市信号。</p>
<blockquote>
<p>表9-1 1995年年初的玉米价格</p>
</blockquote>

<p>注意前20天是用来建立一条基线的，这条基线到1995年1月30日结束。在最初的20天时间里，市场的最高点出现在1月12日，为170.25，到2月6日这一天达到了170，几乎又达到了这一最高点，很快它就成为20天的最高点。再没有其他价格如此接近这一水平，直到3月6日达到171.5，市场给出了一个明显的入市信号。注意在3月10日、3月13日、3月14日和3月15日都给出了入市信号，在图中用粗体数字表示。这些都为你准备了玉米价格在此期间的最好的波动。</p>
<p>在所给的数据中，如果我们是在寻找40天的管道突破，将会得到相同的信号。3月6日的信号也是一个40天的最高点。</p>
<p>现在来寻找下跌方向的信号。在最初的20天里，最低价格为161.25，出现在1月4日。这一价格没有被跌破，很快这一20天的最低价变成了1月30日的价格162.25，这一最低价位仍没有跌破。到2月底，这一20天的最低价变成了20天之前的价格，并且继续上涨，实际上每天都在上涨。在这整个期间，再也没有出现一个新的20天最低点。</p>
<p>科尔·威尔科克斯和埃里克·克里膝登也做过一些关于股票管道突破点的有意义的研究。他们考察了一个庞大的大约2500只股票的数据库（也就是说，在剔除了低额便士股票和流动性很低的股票之后的几乎所有的股票），而且使用了管道突破点的极端定义——股票价格出现了新的历史最高点。在这一新高出现时，他们会在第二天的开盘价入市。他们还希望确保留在趋势里尽可能长的时间，因此使用了一个10倍的ATR追踪止损系统，这里的ATR是由最近45天的数据界定的。</p>
<p>他们在22年的检验期间做了18000笔交易，发现其交易平均赚到15.2%。盈利的交易平均持续441天，赚到51.2%（也就是说，可以实现100%的盈利，而在高度波动的股票上又返回50%）。亏损的交易持续175天，平均亏损20%，他们的交易有49.3%是赚钱的，因此，这些都是令人激动的结果。</p>
<p>我关心的是，也许是在牛市结束之际，R乘数较大的几笔交易带来了大部分结果，但事实并非如此。他们做的交易中R乘数最大的实际上是在2003年，因此，这一方法看起来在牛市和熊市都运作得很好。</p>
<p>我对从期望收益的角度来看待他们的结果比较感兴趣。埃里克非常热心，他帮助我做了这个工作，并把结果绘制成了图9-2，图中以0.5R为单位描述了所有交易的R乘数分布，也就是说，每一笔交易的R乘数都被计算出来并被表示到最近的与该值对应的小框中。所有交易的期望值为0.71R，标准差为2.80R，因此，这是一个极好的系统。</p>
<p>图9-2描述了一个极好的趋势跟踪系统的R乘数分布，它很好地阐释了我认为一个系统的优劣实际上是由其R乘数分布表示的观点。我们将在第13章进行进一步的分析。</p>
<p>注意他们有109笔交易产生了15R或更多的收益，另外，只有91笔交易的损失为1.5R，22笔交易的损失达到2R或更大。这是一个极好的数据图表。他们还利用其专利头寸规模确定技巧模拟了这一方法，发现它产生了一个年复合回报19.3%的结果（他们的报告表明他们一次有多达1500个头寸是敞着口的，因此，其头寸规模确定策略必须对此以及乘数风险和相关的头寸做出解释。另外，他们愿意公开市场的进入与退出策略，但不愿公开头寸规模确定策略，再次表明了我在本书中反复强调的头寸规模确定是至关重要的观点。）。</p>
<p>上述研究表明简单的入市技巧可以非常有效，因为你不可能有比在股市出现空前的新高时入市更为简单的入市策略了，也不可能有比之更简单的市场退出策略，他们的退出策略是一个非常宽的追踪止损指令。</p>
<blockquote>
<p>图9-2 一个长期股票系统的R乘数分布</p>
</blockquote>

<p>然而，大多数人通常希望将入市和某种方案结合起来。他们会问这样一个简单的问题：我如何能确保只选择移动趋势对我最有利的股票，而剔除所有其他的股票，因为我的资产组合不需要1600种股票？这就把你引向了更复杂的问题，把你引向了交易方案的世界。</p>
<p>管道突破点可以与很多方案结合使用，诸如第8章给出的用于股票市场和期货市场的那些方案。比如，除非你也掌握了所考虑商品或股票的充分的基本面信息，否则你可能决定不进行交易。你可能要求所考虑的股票每股收益须很高或者商品要有强烈的需求迹象。<br>管道突破点也可以用做一个方案。你可能会寻找一个突破点，然后在市场出现折回时入市，随后在更短的时间框架内紧接着会出现又一个突破点。你的初始止损指令实际上可以在市场最初的折回出现时发出，这样初始R值就会很小，而不是10倍的ATR，你仍然可以使用10倍的ATR作为追踪止损指令，在它将止损点由初始的紧窄的退出点向上推动时，追踪止损指令就会取而代之。这可能会导致可靠度低得多，但是盈利的交易的R乘数会变得非常大。</p>
<p>使用管道突破点入市技巧的可能性成千上万，如果你将其用于入市信号，就永远不会错过一次大的市场变动，因为没有管道突破点，市场就永远不可能出现大的趋势，而且，假如你碰巧错过了一个入市信号，如果趋势是站得住脚的，那么市场将会继续出现新的入市信号。</p>
<p>管道突破点存在两个主要的缺陷。第一，它往往产生巨额损失，当然，这是你所使用的止损指令的多少造成的结果。例如，如果你使用另外一个管道突破点作为入市的信号，即使它更小，也会返回大量的利润。不过，这更多的是市场退出的问题，而不是进入的问题。</p>
<p>管道突破点存在的第二个缺陷是，要想交易成功通常需要大量的资金。我们以100万美元的资产组合开始，利用各种头寸规模确定法则，在55天的突破点入市，而在13天的突破点退出市场进行了大量的测试。结果表明100万美元也许是最优的账户规模。相比之下，一个10万美元的账户只能在少数几个市场上进行交易-而利用这样一个系统通常可以在15～20个市场上进行交易。</p>
<p>总之，管道突破点入市技巧是一个很好的入市系统，它可以确保你永远不会错过一个趋势信号，但是，也确实会让你受到双重打击。它的可靠度并不比随机入市高多少。此外，因为它需要同时在至少15个市场上进行交易，所以为了进行最优的交易，它要求的账户规模很大。</p>
<p>如果你打算利用管道突破点入市技巧进行交易，我想提出以下建议。首先，利用一个包含价格序列条件（在你愿意利用一个突破点信号之前，价格所发生的变化）入市的方案。例如，你可能要求：在突破发生之前，一个比较狭窄范围的波动；在利用一个突破信号之前，有一个“有效率的市场”；你所考虑的股票较大的相对强度表明的一个明显的趋势。一般来说，对你有所帮助的方案是那些包含入市前一系列价格变化或包含第8章所讨论的价格之外的某些要素的方案。</p>
<p>其次，在管道突破系统中与亏损或要求大额资金有关的大多数问题都可以通过市场选择和认真选择止损和退出来解决。不过，这些都是其他章节要讨论的内容。</p>
<h2 id="基于图表的观察入市法"><a href="#基于图表的观察入市法" class="headerlink" title="基于图表的观察入市法"></a><span style="color:#00ACC1;">基于图表的观察入市法</span></h2><p>很多专业交易商都没有一个精确的入市信号，他们只是用眼睛察看图表并根据对所看到的东西的心理感受来行动。</p>
<p>例如，一位非常成功的交易商告诉我，他的入市技巧只是观察他所考虑的市场的长期走势图。他把如图9-3的一张市场图挂到墙上，然后走到房间的另一端观察它。他说如果从房间的另一端来看，市场的趋势非常明显，那么他就会很顺利地按照趋势的方向进入这一市场。</p>
<blockquote>
<p>图9-3 一个清晰的可观察到的趋势</p>
</blockquote>

<p>我有一位客户利用自己的账户每年买卖股票可以赚到100万美元的利润。他只用观察法入市，尽管他声称观察入市法有点靠直觉。<br>这一特别的入市法对那些严格遵循它的人来说真的有某些优点。例如，价格信息要比你可能由某一指标得到的概括性信息纯粹得多。如果价格信息预示一个明显的趋势，那么这一趋势将持续一段时间的可能性很大，可能会高达60%。因此，按照趋势的方向入市也许要比随机入市好得多。</p>
<h2 id="模式"><a href="#模式" class="headerlink" title="模式"></a><span style="color:#00ACC1;">模式</span></h2><p>很多人在对图表的视觉解释上走得更远。例如，技术分析关注市场形成的很多类型的图表模式。有些模式被描述为牛市，其他模式被描述为熊市。因此，这些模式可以给你入市的信号。图表模式的类型包括日模式，如缺口、蜂值、关键反转日、推进日、快跑日、内部日和大幅波动日。这些模式一般用做短期交易信号。</p>
<p>其他模式被更好地描述为持续模式，包括三角形、旗形和三角旗形。除非你希望按照这些模式出现突破之后的主要趋势的方向入市，否则这些模式是没什么意义的。</p>
<p>最后，还有顶点和谷底模式，包括双谷底和顶点、头肩模式、完美的顶点和谷底，三角形、楔形和岛形反转。显然，这些对寻找顶点和谷底的人来说都是入市信号。</p>
<p>其他图表由蜡烛形组成，开盘和收盘之间的价差部分要么是透明的，要么是实心的，取决于价格是上涨的还是下跌的。有些书描述了这些蜡烛可以形成的各种模式。这些模式都有一些不为人所知的名字，如doj、锤子和悬在空中的人。图9-4描述了一个2006年年初Google的蜡烛图的例子。</p>
<p>如果你对交易的模式方法感兴趣，不妨读一读杰克·施瓦格的书《施瓦格期货基本面分析》一书中有关的章节。书中对所有这些模式和很多图表的例子都有很好的描述，但这些模式都很难进行计算机化的检验。此外，当人们真的检验这些模式时，他们找不到任何证据表明这些模式可以把入市信号的可靠度提高到50%以上。</p>
<blockquote>
<p>图9-4 蜡烛图的一个例子：2006年年初的Google</p>
</blockquote>

<p>既然如此，我决定还是不要在本章花费太多的时间来分析这些模式。大多数人只是按照主要的趋势方向入市，结果都要比在趋势中寻找一个特定的模式好得多。</p>
<h2 id="纯粹的预测"><a href="#纯粹的预测" class="headerlink" title="纯粹的预测"></a><span style="color:#00ACC1;">纯粹的预测</span></h2><p>很多预测技巧都在交易理念一章即第5章的“万物皆有序”部分做了介绍。预测技巧包括艾略特波浪、甘氏理论和各种形式预测顶点和谷底的反趋势的交易方法。我认为预测与好的交易无关，很多不错的预测家，尽管预测技艺高超，但在市场中却很难赚到钱。</p>
<p>我曾经遇到一个人，他把自己描述成市场中的迈克尔·乔丹，意思是他相信在市场交易方面无人能超过他。他声称市场是完全有序的，而且他已经找到了一些专利秘诀，这个秘诀给100万美元他也不卖。他向我出示了一些他的旧账户，这些账户在不到6个月的时间里就从5000美元增加到了40000美元，以此来证明他的知识和技能。</p>
<p>我对他的秘诀并不感兴趣，但是对他如何进行交易感兴趣，因此，我对其交易进行了为期6个月的观察。在此期间，他所交易的账户在价值上下跌了97%。他的交易只有22%是赚钱的，在6个月的交易期间，他的账户从未盈利过。要当心那些自称有高深的交易技能的人。观察他们的交易，尤其是他们如何确 他的交易准确率之所以如此之低，原定头寸规模，如果他们确定低风险的头寸 因之一是他总是预测市场的转折点，其实规模，那么就不是你要走开的问题，而是对大多数市场预测者来说都是如此。</p>
<p>e这个研究的重点不是像我们在本书中所倡导的找到R乘數大的交易或开发期望值高的系统，而是要找到高度可靠的入市，大多数人由于彩票偏好的原因都是这么做的。<br>要赶紧跑开。</p>
<p>上面所说的那个人的交易准确率之所以如此之低，原因之一是他总是预测市场的转折点，其实对大多数市场预测者来说都是如此。例如，在11月份，他预测在中西部会出现较早的霜冻，这会对下一年的大豆作物造成破坏。结果是，这并未发生。有几次他都说市场到了周期变换的时候了，那将是剧烈的变化，所以他要早点入市。结果周期变换从未出现，即使出现，也是不显著的。</p>
<p>预测如果伴有市场的证明当然好。换句话说，如果你认为你能够预测市场的谷底和顶点，那很好。但是，除非市场显示了要转变的某些确定的迹象，否则你不应该就此进行交易。下面要讨论的波动幅度突破就是这种确定的迹象的很好的例子。</p>
<p>5.波动幅度突破</p>
<p>以下两个技巧，波动幅度突破和定向移动最初是由小威尔斯·怀尔德（J. WellesWilder， Jr. ）在他的《技术交易系统的新概念》 （New Concepts in technica trading sy—tems）一书中介绍的。这些技巧很简单而且经受住了时间的考验。<br>波动幅度突破是指价格在特定的方向上发生突然的、剧烈的变动。假如平均真实波幅大约为3个点，我们可以把波动幅度突破定义为一天之内移动平均真实波幅的0.8倍（从前一天收盘），即2.4个点。如果今天的收盘价为35点，波动幅度突破是从该收盘价移动2.4个点，无论是上涨还是下跌。如果价格移动到37.4点，那么市场就出现了一个上涨方向的波动幅度突破，你需要买进；如果价格移动到32.6点，那么市场就出现了一个下跌方向的波动幅度突破，则需要卖空。这就是我想向有需要市场预测的方案的人推荐的一般入市信号。<br>怀尔德的系统和上面描述的有些不同。他建议平均真实波幅要乘上一个常数3.0（称为平均真实波輛乘上一个常数，或记作ARC ），这基本被用做一个从收盘开始的追踪止损，也成了一个当前头寸的市场退出点和建立一个新头寸的入市点。从本质上来说，这种市场退出和在随机入市系统里使用的市场退出几乎完全一样（3倍于平均真实波幅）。<br>，般来说，当市场在某个方向上出现了一天的剧烈波动时，就是你沿着移动的方向进入市场的很好的征兆。例如，市场可能是呈强劲的上升趋势的，但是坚定的下跌方向的波动幅度突破可能是一个表明趋势已经结束以及你需要按照市场新的走势跟随市场的好的指标。至少，你并不想与一个强劲的波动幅度突破背道而驰，因</p>
<p>e ARC是英语average range constant的缩写，即平均真实波幅乘上一个常数。-译者注<br>此，正如下一章要讨论的，这就是一个好的退出市场的时机。<br>图9-5描述了一个债券的波动幅度突破的例子。根据波动幅度突破的定义，可以看出7月24日好像出现了一个明显的突破，而8月2日又发生了一个更强劲的突破。注意在发生突破性波动的一天，价格发生的巨輛波动，并注意新的价格相对于前一天的收盘价突破了多少。</p>
<p>阿距M82M加m限m不识<br>С<br>15H 22日 7月1日 81 15日 22日 8月i日 8B 15H 22H<br>图9-5波动幅度突破的例子<br>在使用波动幅度突破时，你会具备一些重要的优势。第一个优势是，这类价格移动与管道突破有很大的区别，后者要求一个较长的（40天以上）的管道有明显的趋势。不过，图9-5的例子也是管道突破。波动幅度突破只是表明一个趋势的结束和新的趋势的开始，因此，波动幅度突破中至少有些部分的移动和管道突破没有多大关联。实际上，如果市场退出足够迅速，那么由这两种不同的入市信号产生的利润之间可能没有任何关系。<br>至于第二个优势，我已经提到过，就 价格预测如果不与一个合理的交易系是波动幅度突破对那些使用各种模式预测 统一起使用是很危险的。波动幅度突破有价格移动的人而言是理想的工具。价格预 助于你实现这一可靠系统的入市部分，让测如果不与一个合理的交易系统一起使用 你能够利用所掌握的有关市场如何运作的是很危险的。波动幅度突破有助于你实现“秘密知识”进行交易。<br>这一可靠系统的入市部分，让你能够利用所掌握的有关市场如何运作的“秘密知识”进行交易。</p>
<p>6，定向移动和平均定向移动<br>市场分析师在一段时间里曾就市场的趋势性概念进行过激烈的争论。你如何知<br>道市场是真正有趋势的呢？<br>怀尔德（还是在他的《技术交易系统的新概念》里）提出了两个概念，即定向移动和平均定向移动，很多人用它们来界定趋势。例如，布鲁斯·巴布科克在去世前，曾每年出版他的一本名为《市场中的趋势》 （Trendiness in the Market）的书。在书中，他对各种可交易期货市场的趋势进行了排序。该书基于以下观点：如果利用大部分“有趋势的历史”进行交易，你就最有可能捕捉到这些市场将来的趋势。巴布科克对趋势的度量就是利用28天定向移动指数（见下面）在每个市场进行交易的可靠度的指标。如果定向移动最终的结果是向上的，那么就应该做多头；如果定向移动最终的结果是向下的，那么就应该做空头。有利可图的市场注定是有趋势的而最有利可图的市场注定是最富有趋势的。定向移动背后的基本假定如下：<br>·在趋势向上时，今天的最高价应该高于昨天的最高价，因此，两个价格之间的差距就是市场向上的定向移动。<br>在趋势向下时，今天的最低价应该低于昨天的最低价，因此，两个价格之间的羞距就是市场向下的定向移动。<br>最小变化日，即今天的最高价和最低价没有超出昨天的范围，基本上可以被忽略。<br>最大变化日，即今天的最高价和最低价都超出了昨天的范围，既扩大向上的定向移动，又扩大向下的定向移动，但是，只有较大的值才被使用。定向移动指标计算如下：<br>首先，对事先给定的天数中的上涨日和下跌日求和，即EDI+和DI-（怀尔德建议的是14天）。<br>其次，对以上每个求得的和除以同样天数的平均真实波幅。定向移动指标计算如下：<br>·确定2DI+和EDI-的差，并取其绝对值，即DI的差=1（£D1+）-（EDI-）10<br>·确定D的和： DI的和=（EDI+）+（EDI-）<br>再次，定向移动指数被定义为： （D的差） / （D的和） x 100，乘以100是为了使定向移动指数标准化，这样其取值就可以落在0-100之间。<br>最后，尽管怀尔德建议用14天进行计算，但是勒博和卢卡斯的报告认为14-20天也是很好的，而18天是最优的。<br>定向移动指标最重要的扩展也许是平均定向移动指数，即ADX （average<br>directional movement index）， ADX就是定向移动指数的移动平均，它通常是对前面所用的同样的天数求平均（比如14天）。<br>勒博和卢卡斯认为对ADX的正确理解可以让交易商显著地提高他们发现好的市场和问避不好的市场的概率。两人均认为ADX实际上提供了一个量化各种趋势强度的工具，而且他们在这一领域比任何人做的工作都多。因为我和勒博办过很多研讨班，所以我非常了解他对ADX的喜爱及其使用。<br>总的来说， ADX值越大，市场就越有可能存在定向移动，但是，你不知道这一移动是向上还是向下的。ADX值越小，市场存在定向移动的可能性就越小。因此ADX的大小告诉了我们趋势的强弱，但是并没有告诉我们趋势的方向。<br>根据勒博和卢卡斯的说法，我们无法使用ADX的绝对值来了解一个趋势是否强劲。他们进行了以下观察：<br>只要ADX值是在增大的，任何大于15的ADX值都预示着趋势。<br>ADX值的增幅越大，趋势就越强劲。例如， ADX值由15跳到20，相对于由25跳到27可能是一个更好的信号。<br>. ADX值变小意味着趋势在减弱或者不再有趋势。<br>当ADX值变大时，诸如超买或者超卖摇摆指数这样的指数就不再起作用了。这些摇摆指数只在ADX值变小时才起作用。<br>在向你推荐如何使用ADX或定向移动作为入市信号之前，首先讨论使用ADX通常会出现的几个问题。这些问题包括峰值和滞后因素。<br>在市场以峰值的形式突然改变方向时， ADX的调整就很困难。例如，在市场突然改变方向时，勒博和卢卡斯推荐使用的长期ADX看起来好像会突然变得平缓-预示着一个没有趋势的市场。因此，一个大的下跌趋势可能会被ADX完全忽略。<br>长期ADX还存在一个内在的滞后，也就是说，直到趋势已经很明朗之前，你还不知道自己已经处在一个有趋势的市场之中。如果你是一位短期交易商或者希望早一点进入趋势，这一点是真正的劣势，但如果你的目标是只进入有明显信号的强劲的趋势。那么ADX的滞后就根本不是一个问题。<br>既然你已经理解了定向移动和ADX是什么，现在就可以给你一些有用的入市信号了。以下一些入市信号都只是供你参考：<br>在D1+和DI-相交后入市。多头交易出现在DI+超过D1-.而且前一天的最高价被突破的情况下。而空头交易出现在DI-超过D1+，而且前一天的最低价被突破的情况下。这就是怀尔德最初对这一指标的使用，他认为价格被突破是信号中的一个重要部分。<br>当ADX在两天内增加4个点以上时，以市场移动的方向入市。”当然，需要一个交易方案（比如图表观察法）来告诉你是做空头还是多头，因为ADX的增加只能表明趋势很强劲。<br>，在ADX达到过去10天的最大值时入市。当然，还是需要另外一个信号（方案）来告诉你进入的方向。</p>
<p>7，移动平均和适应性移动平均</p>
<p>移动平均是非常流行的交易指标，因为它简单而且容易计算。据我所知，自从人类最初创建交易市场之始，移动平均就被使用了。<br>这种平均值的概念很简单：用一个简单的数、一个平均值，来表示过去X天的价格。它是过去X天的价格的和，除以天数得出的平均数，这个平均数是随着时间变化的。在得到了明天的价格后，就把X天前的价格去掉（X是计算移动平均的天数），加上新的价格，然后再除以天数。<br>对大多数人而言，掌握一个条形图要比掌握30个条形图简单，尽管30个条形图可以提供有关市场实际表现的多得多的信息，但是在人们对数据进行某种方式的转换后，他们感觉更能够控制市场。因此，很多交易商和投资者都使用移动平均。<br>如果你计算的移动平均包括的天数很多，那么该移动平均的变化就很慢，如果只包括几天，那么移动就会很快。例如，很多股市跟踪者使用一年的移动平均来表示股市的总体趋势，在价格一直持续上涨时，它应该远远大于一年的移动平均。在价格下跌到一年移动平均之下时，有些人就会认为价格的方向已经改变了。科尔比（Colby）和迈耶斯（ Meyers）在其著作《技术性市场指标百科全书》 （Encyclopedia ofTechnical Market Indicatars）中发现，在价格超过一年移动平均时买进股票和在价格低于该平均值时卖出股票的策略要远远胜过买进和持有股票的策略。<br>相比之下，短期移动平均变动得就比较快。市场价格超过5天的移动平均并不需要太多天的上涨，同样的道理，价格也<br>在价格超过一年移动平均时买进股票 可以很快下跌到这一平均值之下。<br>和在价格低于该平均值时卖出股票的策略 唐奇安是最早使用移动平均系统进行要远远胜过买进和持有股票的策略。 若述的人之一。他使用了5天和20天的移动平均，在5天的移动平均超过20天的移动平均时，就做多头；在5天的移动平均下降到20天的移动平均之下时，就反过来做空头。</p>
<p>e或者你所做的检验建议你为了实现目标应该使用的任何点数。<br>这种系统在完全有趋势的市场上运行得很好。不过，这种系统认为市场只有两个方向，上涨或下跌。但遗憾的是，市场往往只有在大约15%的时间里是有趋势的，而在85%的时间里处于盘整状态。结果，在市场处于盘整期间，这种系统就会不断造成双重损失。<br>为了克服这一问题，交易商决定使用三个移动平均。R.C.艾伦在20世纪70年代早期推广了一种包括4天、9天和18天移动平均的方法。在4天和9天的移动平均与18天的移动平均交叉时，就进入市场—如果上涨就做多头，下跃就做空头。当4天的信号回头和9天的信号相交时，就得到一个退出的信号，但是，直到4天和9天在18天的平均值同一边时，才会得到一个新的信号。因此，这种系统给你的是中性的区域。<br>有很多种移动平均和移动平均系统。例如，简单移动平均（如上所述）、加权移动平均、指数移动平均、置换移动平均和适应性移动平均。每一种移动平均都旨在克服其他移动平均的具体问题，但是也都产生了自身的问题。<br>（1）加权移动平均。简单移动平均赋予被舍去的一天和最近一天同样的权重，有些人认为这不是最好的交易方法，因为最近的价格是最重要的。因此，加权移动平均给予最近的数据较多的权重，而给较远的数据较少的权重。加权移动平均可能变得相当复杂，因<br>为你可以只赋予最近一天额外的权重，或 有些人认为复杂的计算可以使交易更者也可以赋予每天不同的权重。例如，你为有效。这个认识是错误的，但是人们还可以这样得到一个10天的加权移动平均， 是这么去做。<br>第一天（最远的）的数据乘以1，第二天的乘以2，第三天的乘以3，依此类推。这也许很荒谬，但是有些人认为复杂的计算可以使交易更为有效。这个认识是错误的，但是人们还是这么去做。<br>（2）指数移动平均。指数移动平均赋予最近的数据最大的权重，同时不去掉任何数据。例如，一个0. 1的指数移动平均（大约等于20天的平均值）是将今天的价格乘以0.1然后加到昨天的平均数上，不减去任何数据。这个计算过程非常方便，而且赋予最近的数据更大的权重。<br>（3）置换移动平均。因为移动平均往往与价格非常接近，信号也经常来得太快，因此，有些人选择将其移动平均“置换”到将来的某些点数。这就意味着受到移动</p>
<p>e若要详细讨论这一工作，见LeBeau and Lacas， Tochnical Traders’Cuide，<br>e查克·勒博告诉我，他们检验了能够想象得到的移动平均相交的各种可能组合。结果在有趋势的市场上都运作得相当好，但是在水平移动的市场上都是失败的。没有一个是比随机入市好很多的。<br>平均信号双重打击的可能性要小得多。<br>（4）适应性移动平均。适应性移动平均在20世纪90年代中期开始流行起来。考夫曼、钱德（Chande）和克罗尔（Kroll）三人都有各自不同类型的适应性移动平均。这些特定的系统根据市场分析和速度的某种组合而改变速度。<br>想一想市场中的噪声量。每日价格波动是测度市场噪声的一个很好的指标。市场存在大量的噪声时，移动平均必须变化很慢以避免在进出市场时受到双重打击。然而，在市场十分平滑时，受到双重打击的可能性要小得多，所以快速移动平均值在这时可以使用。因此，适应性移动平均首先测度相对于市场中的噪声量，市场移动的速度，然后根据速度和噪声因素来调整平均值的速度。<br>因此，适应性移动平均必须至少要有测度市场目前的效率的指标（存在多少噪声）以及能够将以上情形用各种移动平均表示出来。使用适应性移动平均的一个具体的例子在本章后面要讨论到的佩里·考夫曼设计的入市技巧中给出。</p>
<p>8，摇摆指数和随机指数<br>诸如相对强度指标（RS）这样的摇摆指数、随机指数以及威廉的R百分比等指标都是用来帮助那些努力寻找顶点和谷底的人的。在我看来，这是愚人的游戏，因为并没有证据证明，基于摇摆指数的入市信号比随机入市的可靠度高出很多。事实上，在大多数情形下，并无证据证明市场一般能满足很多摇摆指数所做的假定。因此，我对自己不怎么信任的东西不做太多的讨论。<br>然而，你可以使用超买和/或超卖摇摆指数，比如怀尔德的RSI， 来帮助你在狭小的止损下进行交易（见第11章有关保护性止损部分）。下面是你选择做这种交易时必须具备的事项：<br>·一直等到市场给出一个在趋势中的清晰的信号。这是一个基于价格的方案。<br>·一直等到市场稍微反转，而且你的摇摆指数显示这种反应可能已经到了极点。这一步仍然是基于价格的方案，但是它必须在第1步之后出现。<br>，在市场显示它将再次以先前趋势的方向移动时，按照这一方向进入市场。这样的例子如：在摇摆指数显示达到极点之前，价格回归到先前的最高价（或对短期信号而言的最低价）。<br>这种交易利用非常小的止损（反应的极端）使交易信号高度可信成为可能高度可信的交易信号。此外，这种交易的风险非常小，意味着潜在交易的回报-风险比率会很高。这实际上是上一章所讨论的折回方案的一个例子，而且在我看来这是使用摇摆指数最好的方法。此外，我所见过的一些最好的系统也是基于这些概念的。<br>9.3设计你自己的入市信号</p>
<p>对你而言，最好的入市信号可能还是自己设计的。设计这样一个信号最好的方法是，彻底理清你的信号应该建立在怎样的概念之上。我曾设计了以下例子来对这一思路进行解释，只是举个例子。我们将从一个被交易商和投资者广为接受的想法着手，然后拓展到一般的想法。这个想法没有经过检验，但是在找到有用的方法之前，如果你想使用它，大可放心使用。<br>让我们围绕物理运动背后的基本理念来设计一个系统。比如，可以想象一下预测一辆车的运动。你不知道汽车要开向哪里（在一个非常大的停车场里，汽车有无数个弯可以转），但是你知道汽车去过哪里。你还知道车的方向、速度（或速率）、速率变化（加速还是减速）以及它的动量。如果掌握了这些信息，在某些情况下，你就会非常了解车在近期会有什么动作。你想确定的是这辆车什么时候会以相同的方向尽可能长时间地快速奔跑。<br>如果这辆车在以一个特定的方向行驶，继续以此方向行驶的可能性比不以此方向行驶的可能性要大。它可能会改变方向，但是继续朝着原来的方向行驶的可能性更大。而且，如果你对这辆车的速率、速率的改变和动量了解得越多，那么你就会知道在哪些情形下，这辆车越有可能继续以原来的方向前进。<br>为了改变方向，车一般必须放慢速度，因此，如果一辆车跑得很快（很快的速率），它继续以相同的方向快速行驶的可能性要比不这样做的可能性大。<br>市场也是如此。如果它正在某个方向上快速移动，那么它继续向这个方向快速移动的可能性要比不这样做的可能性大。想一想，一个快速前进的市场在其方向发生大的变化之前，首先要把速度降下来的可能性很大，市场技术分析师称之为动量这真的是会引起误导的说法。”这个被大家称为动量的技术指标只是测度了由一个时间框架到另一个时间框架的价格变化（通常是收盘价），但我们将使用速度或速率，因为这两个名词都更为确切。<br>速度实际上是以每单位时间的运行距离来定义的（比如每小时60英里）。在进行速度计算时，如果你使用固定的距离（比如10天），那么就可以简单地假定速度就是每X天的期间所经过的距离，这里 是你选择的天数。有意思的是，比较专业的交易商在其市场研究中可能使用速率（他们称之为动量指标），而不是任何其他指标。</p>
<p>e在物理学上，动量是指质量乘以加速度，相当于市场中大量股票变动的加速度<br>如何使用速度作为入市的信号呢？速度为零意味着没有移动。速度指标一般是一个在零线上下移动的数字，也就是从快<br>当速度改变方向以及朝着相反的方向 速向上移动到快速向下移动，或者反过来。开始加速时，你就获得了一个潜在的入市 当速度改变方向以及朝着相反的方向开始信号。<br>加速时，你就获得了一个潜在的入市信号。</p>
<p>加速度和减速度<br>加速度和减速度是措速度的改变。如果一辆车正在加快速度，那么与一辆只是快速行驶的车相比，就更有可能继续朝着相同的方向行驶。相反，如果一辆车正在减速，那么它改变行驶方向的可能性要大得多。<br>尽管市场移动的速度变化在预测其将来的移动时，不像加速度或减速度在预测汽车的行驶时那么有意义，但它仍然是一个重要的因素。然而，我还从未见过直接使用市场的加速度或减速度来对市场进行预测的。如果可以有一个公式来表示的话，应该是：</p>
<p>速度变化= （今天的速度-X那天的速度） /时间<br>尽管没有对加速度或减速度作为一个入市指标进行深入的研究，但是我们把一些数据编成了程序以做检验。表9-2给出了我们在前面看到过的相同的玉米数据的收盘价。该表在基准线之后由第21天开始。回想一下20天的管道突破点和40天的管道突破点都发生在3月6日，在表中是第46天。表9-2还给出了20天价格的平均变化率（速度）。速度的下降用粗黑体表示，速度的增加则用普通字体表示。表9-2速度和加速度研究<br>注意表中20天正的速度周期实际上是从第40天开始的，即管道突破发生的第46天的前7天。表9-2的最后两栏给出的是3天和5天的加速度或减速度（在3-5天的周期里速度实际上变化了多少）。长期的加速度（10天）也在这一天开始了正的加速度，只有一天是负的。<br>图9-6在时间坐标上给出了这三个变量。注意在第46天开始了管道突破，实际上，它在3月6日就开始了。速度和加速度开始移动得更早，然而，就在突破发生之前，速度和加速度都出现了一次下降，但是除了10天的加速度稍微降到了负值以外，数字都仍然是正的。<br>这说明什么呢？我当然不是建议你使用一个正的速度或加速度信号（与减速度相反）作为一个入市系统。相反，我只是指出它们之间的关系。在理解了关系之后，这种关系就是形成你在交易中可以使用的概念的基础。<br>记住，钱并非一定是由正确的入市赚来的。相反，如果你能确定一个入市，它有很高的概率（比如25%）能为你带来R乘数较大的交易，那么你就非常有可能赚到大量的、持续的利润。加速的开始可以为你提供一个低风险的能够进行窄小止损的点，这意味着R很低，有潜力获得较高的R乘数利润。当然，这需要进行大量的<br>图9-6玉米价格移动的速度和加速度<br>加速度被证明是一个好的折回方案的完美工具。例如，在管道突破发生之后，你只需要寻找一个减速的机会，减速一旦变为加速，你就会得到一个完美的信号，它只需要较窄小的止损，就有可能给你带来非常高的R乘数利润。在所给的例子中，减速在管道突破发生之前就已经开始了。</p>
<p>29.4对一些常用系统采用的入市技巧的评估<br>入市的最后一个工作是同顾一下在一些股市系统和一些用于更为投机性市场的系统中所使用的典型的入市信号。</p>
<p>1，对一些股市系统的问顾<br>（1）威廉·欧奈尔的股市系统。威廉·欧奈尔的股市交易系统是使用前一章所述的CAN SLM方案的交易系统之一。入市是该系统的时机选择部分，它基于在你所考虑的股票中可以发现的各种图表之上。入市的关键部分是在持续7周至15个月的盘整之后出现了价格突破。典型的模式包括杯形和手柄形、长期基础上的突破、碟形和手柄形、双底或双基，前两种模式是最常见的。威廉·欧奈尔在他的书中给出了这些模式的很多例子。<br>入市的另外一个关键是突破必须伴有成交量的大幅上涨。例如，欧奈尔建议突<br>破点成交量必须大于该股票的每日平均成交量的至少50%以上。成交量的大幅上涨是欧奈尔的入市系统最为重要的方面，而这一点很少有人遵守。大多数人只是寻找像杯子或手柄一样的模式或只是寻找一个价格突破。把成交量想象成交通工具的质量，如果一辆重型卡车开始快速行驶，那么它要比一辆碰上一角硬币都会转向或停止的小车更有可能继续前进。<br>（2）沃伦·巴菲特的公司评估模型。巴菲特的公司评估模型，结合前面一章给出的所有滤嘴来看，或许是不存在一个入市技巧的，尽管这一观点在某种程度上只是我的推测。我的猜测是只要有足够的钱，一旦发现一个新公司满足标准，巴菲特就会把它买下。因此，发现一个公司满足他所有的标准也许就是他的入市信号-<br>尽管我不确定在一个被高估的市场中，是否所有公司都能满足他的标准。巴菲特确实不怎么关心市场的表现，下面可以引用他的一段话作证：</p>
<p>市场在那里只是作为一个基准点来看看是否有人去做傻事。当我们投资股票时，是在对公司投资。你的行为必须符合理性而不是时尚。</p>
<p>2，对一些期货市场系统的回顾</p>
<p>（1）佩里·考夫曼的适应性交易。同想一下我们在第8章讨论的考夫曼的适应性方法，考夫曼设计了一个效率比率，该比率是建立在市场移动的速度和方向以及市场中噪声量的基础之上的，并且给出了几个可以使用的可能的效率比率。<br>在以下计算中，我们将假定效率比率由0至1-0意味着没有市场移动只有噪声，而1则表示市场中只有移动没有噪声。在一个非常有效率的市场上，总的价格移动将等于两个期间的价格移动。比率应该等于1.0，因为没有噪声。例如，如果在10天里价格移动了10个点，而每天移动了1个点，那么该比率就等于10/ （10x1） =1.0.<br>在一个非常无效率的市场上，总的价格移动很小，而每天的价格移动很大，最终的比率会倾向于0。例如，如果价格在10天里只移动了1个点，但是每天价格都上涨或下跌了10个点，那么比率就会是1/ （10 x 10） =0.01，当然，如果没有价格移动，无论总的价格移动是多少，比率都将是0<br>计算适应性移动平均的下一步是，用一系列的移动平均速度来描述效率比率。我们可以将2天的平均称为快速， 30天的平均称为慢速。考夫曼通过以下公式把移动平均速度转换成了一个平滑常数SC：<br>SC=2/ （N+1）<br>快速的平滑常数是2/ （2+1） =2/3=0.6667；慢速的平滑常数是2/ （30+1） =<br>2/31=0.064 52，考夫曼在其公式中使用的两个值的差是0.602 15最后，考夫曼推荐的利用效率比率计算平滑常数的公式如下：<br>换算后的平滑常数= （效率比率xSC差） +慢速SC<br>代入数值后，可以得出：<br>换算后的平滑常数= （效率比率x0.602 15） +0.064 52<br>因此，如果效率比率为1.0，换算后的平滑常数就等于0.6667；如果效率比率为0，那么平滑常数就等于0.064 52，注意这一结果是如何与2天和30天的数字分别对应的。<br>因为30天的数字仍然会带来影响，因此，考夫曼建议在应用之前对最后的平滑常数取平方，其意思是在效率比率（ER）太低时，将取消交易。适应性移动平均（AMA）的计算公式如下：<br>AMA=昨天的AMA +SCx （今天的价格-昨天的AMA）<br>假如昨天的AMA是40，今天的价格是47-1个点的差距。在一个有效率的市场上，平均值将会发生大的变化-将AMA提高近3.1个点-几乎是7的一半。在一个无效率的市场上， ER大约为0.3，这个差距几乎不会对AMA产生影响，只将其向上移动0.4个点。因此，在有效率的市场中，由AMA的移动获得一次交易的可能性要大得多。<br>根据考夫曼的观点， AMA等于平滑指数，这样的平均数一经发出定向改变信号，就应该进行交易。换句话说就是，在AMA上升时应该买进，而在AMA下降时应该卖出。<br>但对这些信号进行交易可能会造成大量的双赔，因此，考夫曼又增加了下一个滤嘴：</p>
<p>滤嘴=百分比×标准差（过去20天中AMA一天的变化）<br>考夫曼建议期货和外汇交易可以使用一个较小的百分比（比如10% ），而股票和利率市场可以使用一个较大的百分比（比如100%）。<br>为你打算交易的市场确定合适的滤嘴。在一个下跌趋势中，在最低价格上加上滤嘴作为买进的信号，而在一个上升的趋势中，在最高价格上减去滤嘴作为卖出的信号。这基本上就是你的适应性入市信号。<br>你能够把市场效率比率应用到我们讨论过的很多入市技巧上。比如，你可以有一个适应性的管道突破系统，管道的长度是适应性的；你也可以有一个适应性的波动幅度突破，所要求的突破的规模取决于市场效率。<br>（2）威廉·加拉赫的基本面分析。同顾一下第8章，你就可以知道，加拉赫认为可以把市场的基本面关系作为一个方案。在基本面关系很强劲时，你就可以按照基本面关系所揭示的市场方向入市。基本面数据对每一个市场都是不同的。此外，通过回顾第5章勒博有关基本面交易的讨论，我们知道应该听从专家的建议来确定任何特定市场的基本面关系。勒博还警告说，你可能在基本面关系上是正确的，但是在入市时机选择上却是极端错误的。因此，你需要一个好的时机选择系统来对基本面关系进行交易。</p>
<p>为了进行解释，加拉赫给出了一个10天的管道突破反转系统来阐释技术分析的荒唐之处。加拉赫建议一旦了解了市场的基本面关系，按照基本面关系所预测的市场方向，利用一个10天的突破进行交易是非常安全的策略。我个人认为这样一个系统将会导致很多双赔。不过，一个50天或更长时间的管道突破，加上基本面关系的支持应该是一个非常不错的入市信号。</p>
<p>（3）肯·罗伯茨的1-2-3反转方法。肯·罗伯茨推荐在入市前使用两种交易方案。第一种是市场必须出现一个9个月的最高价或最低价；第二种是市场出现了1-2-3的反转。请看第8章的有关阐述以及市场出现9个月的极点价，随后又出现了一个1-2-3的反转的几点解释。在具备了这样的方案后，你应该使用怎样的入市系统呢？</p>
<p>在这两种方案具备之后，当市场再次移向点2并出现一个新的极点价格时，进入市场，见图9-7，这个新的极点价格就是入市信号。图9-7描述了一个前所未有的最高价以及随后的1-2-3反转之后的新的极点价格。图9-7中的那条线就是入市信号。你也可以在点2的价格在你所预期的市场移动方向被突破后即刻进入市场。</p>
<blockquote>
<p>图9-7 英镑市场在1988年12月出现了新的历史最高点1，随后价格急剧下跌到点2，又反弹到点3，然后又在1月11日急剧下跌，达到一个新低点4一入市信号。持续了几个月之后，市场又恢复到新高</p>
</blockquote>

<p>这一具体的交易方法背后的整个假定就是，市场在完成了一个长期的趋势和1-2-3-4模式以及点4成为在相反方向上的新的极点价格之后，市场将会发生扭转但通常市场并不扭转，相反，它会进入一个长期的盘整阶段，期间会带来很多双赔。无论如何，这种方法在正确的止损、退出和头寸规模确定之下，是可以成功地进行交易的，这些我们都将在随后的章节里讨论。</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a><span style="color:#339AFF;">小结</span></h1><p>入市相对于交易系统的其他方面受到大多数人更多的关注。这种关注很大程度上是一种错位，经常是以忽视系统中最关键的方面为代价的。不过，如果好的时机选择能够提高交易的可靠度而又不改变其回报一风险比率，那么入市当然值得你关注。</p>
<p>利用随机入市系统也可以赚到钱。事实上，很少有一种入市技巧显示出比随机入市有1高得多的可靠度，尤其是20天或以上。</p>
<p>好的入市指标应该包括：</p>
<ul>
<li>40天以上的管道突破；</li>
<li>仅一天的波动幅度突破就相当于平均真实波幅的大概0.8倍，这对市场预测者尤为有用：</li>
<li>仅一天内（或两天的期间）就出现较大的ADX移动与一个明显的趋势指示相结合</li>
<li>一个显示速度在市场趋势的方向上不断增加的指标的使用；</li>
<li>一个基于预先确定的滤嘴而改变方向和移动一个事先确定的距离的适应性移动平均：</li>
<li>一个摇摆指数，指示逆着主要趋势的极点移动，随后又是趋势明显的恢复。</li>
</ul>
<p>讨论了各种系统普遍使用的入市技巧，在几个例子中还讨论了技巧的改进。</p>
<!-- flag of hidden posts -->
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/通向财务自由之路/" rel="tag"># 通向财务自由之路</a>
          
        </div>
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="CheBin">
            
              <p class="site-author-name" itemprop="name">CheBin</p>
              <div class="site-description motion-element" itemprop="description">看视频才能学会，看文字学不会的</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">1017</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">72</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          


          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li>
                    <a href="/2023/04/04/结束语｜秒杀系统之上的业务协同思考/" title="结束语｜秒杀系统之上的业务协同思考" target="_blank">结束语｜秒杀系统之上的业务协同思考</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/14｜百万级流量秒杀系统的关键总结/" title="14｜百万级流量秒杀系统的关键总结" target="_blank">14｜百万级流量秒杀系统的关键总结</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/13｜优化番外篇：Vertx介绍及快速入门/" title="13｜优化番外篇：Vertx介绍及快速入门" target="_blank">13｜优化番外篇：Vertx介绍及快速入门</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/12｜高性能优化：单机Java极致优化/" title="12｜高性能优化：单机Java极致优化" target="_blank">12｜高性能优化：单机Java极致优化</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/11｜高性能优化：物理机极致优化/" title="11｜高性能优化：物理机极致优化" target="_blank">11｜高性能优化：物理机极致优化</a>
                  </li>
                
              </ul>
            </div>
        

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#努力击败随机入市"><span class="nav-number">1.</span> <span class="nav-text">努力击败随机入市</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#勒博和卢卡斯的研究"><span class="nav-number">1.1.</span> <span class="nav-text">勒博和卢卡斯的研究</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常见的入市技巧"><span class="nav-number">2.</span> <span class="nav-text">常见的入市技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#管道突破点"><span class="nav-number">2.1.</span> <span class="nav-text">管道突破点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基于图表的观察入市法"><span class="nav-number">2.2.</span> <span class="nav-text">基于图表的观察入市法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模式"><span class="nav-number">2.3.</span> <span class="nav-text">模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#纯粹的预测"><span class="nav-number">2.4.</span> <span class="nav-text">纯粹的预测</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#小结"><span class="nav-number">3.</span> <span class="nav-text">小结</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2023</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CheBin</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">8.2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">124:48</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
