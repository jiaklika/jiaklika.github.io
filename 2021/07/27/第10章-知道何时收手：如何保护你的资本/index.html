<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">
<meta name="keywords" content="通向财务自由之路">
<meta property="og:type" content="article">
<meta property="og:title" content="第10章 知道何时收手：如何保护你的资本">
<meta property="og:url" content="http://yoursite.com/2021/07/27/第10章-知道何时收手：如何保护你的资本/index.html">
<meta property="og:site_name" content="车斌的技术博客">
<meta property="og:description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-11-05T07:46:55.825Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第10章 知道何时收手：如何保护你的资本">
<meta name="twitter:description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">






  <link rel="canonical" href="http://yoursite.com/2021/07/27/第10章-知道何时收手：如何保护你的资本/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>第10章 知道何时收手：如何保护你的资本 | 车斌的技术博客</title><meta name="robots" content="noindex">
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">车斌的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">专注</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/27/第10章-知道何时收手：如何保护你的资本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CheBin">
      <meta itemprop="description" content="绝知此事要躬行，不动手就是懒。一篇文章看10遍，而不是10篇文章看1遍。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="车斌的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第10章 知道何时收手：如何保护你的资本

              
            
          </h1>
        

        <div class="post-meta">

          

          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2021-07-27 13:50:04" itemprop="dateCreated datePublished" datetime="2021-07-27T13:50:04+08:00">2021-07-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2021-11-05 15:46:55" itemprop="dateModified" datetime="2021-11-05T15:46:55+08:00">2021-11-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/期货/" itemprop="url" rel="index"><span itemprop="name">期货</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">12k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">11 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>思考并回答以下问题：</p>
<ul>
<li>总结一下，这章作者最主要想表达什么观点？</li>
</ul>
<a id="more"></a>
<p>保护性停价就像是红灯，你可以冲过去，但是这样做并不高明！如果每次去镇上都闯红灯，那么你就可能不会很快或安全地到达目的地。——理查德·哈丁</p>
<p>在我举办的一次研讨班上，有一个学员情绪非常低落，几乎无法集中注意力，他为最近的股市亏损而沮丧。在去年上半年，他的退休金账户已经由40万美元涨到了130万美元。他说他原打算参加这期研讨班，部分原因就是想告诉我他已经成为了一位多么出色的投资家。然而，就在研讨班开始前的两周时间里，他账户上的一大堆股票都出现了剧跌，账户下跌了70%，其中有一只股票从每股200多美元下跌到了每股只有大约50美元——最后他赔钱抛出。现在该股票每股60美元，所以他确信他是在最低点抛出的了。</p>
<p>我希望这样的故事不是大家所熟知的，但是我相信它是会非常频繁地发生的。人们在得到一些指点或是一些热门的新的入市技巧后就进入市场，但是在市场中建立了头寸之后，至于将来何时以及怎样退出市场他们却毫无主意。退出市场，无论是中止一个亏损的头寸还是实现利润，都是在市场上赚钱的关键。事实上，交易的黄金法则就是：</p>
<p><strong>截住你的损失，滚动你的利润。</strong></p>
<p>这一黄金法则在我看来就是对市场退出的诠释。约翰·斯威尼在他那本不同凡响的《进军证券交易》一书中，做出了以下评论：</p>
<blockquote>
<p>正像当我们还是孩子时去看床底下或是漆黑的壁橱里有没有怪物是非常可怕的事情一样，看到交易亏损而且要接受它同样是一件可怕的事情。在那时，躲到被子底下去要容易多了，而现在采取一些防范的机制也可以容易得多。（我听到最多的一句话是“哦，这个交易法则不起作用了！”好像是入市策略导致了这笔损失。）</p>
</blockquote>
<p>这里很重要的一点是，如果你想成为成功的交易商，退出失败的交易至关重要。大多数人考虑的主要是入市或方案，然而这样做不会帮助你获得成功。你可以通过掌控退出和掌握头寸规模确定的艺术而变得富有。</p>
<p>在我看来，除非在进入市场时就已经非常清楚应该在什么时候退出市场，否则你就算不上拥有一个交易系统。</p>
<p>在最坏情形下退出市场，即旨在保护你的资本的市场退出，也应该是事先确定的。此外，你还应该有如何实现利润的想法以及让利润滚动起来的策略。市场退出的这方面内容留待第11章讨论。</p>
<p>以下是其他一些市场传奇人物关于保护性止损的说法：</p>
<p>威廉·欧奈尔：</p>
<p>“股市中赚钱的全部秘诀就是在你已经错了时，尽可能地少赔钱。”</p>
<p>杰西·利弗莫尔：</p>
<p>“投资者都是大赌徒，下一个赌注，一直耗下去，如果赌注下错了，他们就全盘皆输。”</p>
<h1 id="停价的作用"><a href="#停价的作用" class="headerlink" title="停价的作用"></a><span style="color:#339AFF;">停价的作用</span></h1><p>当你在市场中设立了一个止损停价时，就是在做两件重要的事情。第一，你是在为自己设置愿意承受的最大亏损（风险），我们将其称为初始风险R，因为它是你确定在第7章所讨论的期望收益R乘数的基础。在我看来，每一位交易商或者投资者都应该理解R的概念。记住， R就是在你必须退出市场保护资本时，预计一笔交易要损失的数额。如果你没有为在市场中建立的每一个头寸事先确定一个R值，那么你就是在拿钱赌博。</p>
<p>经过很多次交易后，你可能会发现平均亏损大约是R的一半，即0.5R，这取决于你执行停价的策略。不过，有时市场会一发不可收拾，你的亏损将达到2R甚至是3R。希望这么大的亏损很少光顾你。</p>
<p>假定你在玉米市场上建立了一个头寸，并决定使用一个3倍于每日波动幅度的停价水平。现在每日的波动幅度大约是3美分，乘上每手合约5000蒲式耳就是150美元，那么，你的停价水平是它的3倍，即每手合约450美元。如果平均损失只是它的一半，即0.5R，假如交易对你不利，你最大的损失可能就是225美元。</p>
<p>让我们看一个股票的例子。假如你买了ABCD公司的股票100股，成交价格是48美元，每日波动幅度是50美分，你决定使用每股1.5美元的停价水平，因此，在股票价格跌到46.5美元时，你就卖出。这并不是一个大的移动，它表示每100股股票只亏损150美元。</p>
<p>当你发出了一个停价指令时，在做的第二件重要的事情就是设定一个用于衡量随后收益的基准。作为交易商，你的主要工作应该是设计一个将为你赚到相当于较大的R乘数利润的计划。例如，形成一个非常好的交易系统并不需要10R或者20R的利润，在上面提到的玉米交易中，实现2250美元或者4500美元的利润就已经相当不错了。在取得了几笔这样的利润后，你是可以容忍很多亏损225美元的交易的。</p>
<p>我在期望收益一章就讨论过R乘数，它对你的成功非常重要，因此在此予以重申。看一个股市的例子。你买了价格为48美元的股票100股，而且计划在价格跌到46.50美元时抛出。假设你会一直持有这只股票足够长的时间，直到它增值20%，这意味着每股可以赚到9.63美元或者说价格上涨到了57.63美元。从本质上来说，每100股股票承受了150美元的风险，为的是获取赚963美元的机会——这是一个比6R稍多的收益，是完全可能的。</p>
<p>更现实地来看，股市中的佣金和价格估计差异无论是在亏损还是盈利中都会很容易地形成额外的30美元的成本，尤其是在你不是通过互联网交易时。如果把成本考虑进去，为了获得933美元（963美元减去30美元的成本）的收益，可能要经受的亏损是180美元（150美元加上30美元的成本）。这就意味着你的收益是5.35R。你理解其中的原理了吗？从R的角度考虑交易系统是你需要理解的最为重要的概念之一，它会改变你通往市场的方法。实际上我加了一章新的内容，即第12章，来帮助你在每次进入一笔交易前首先考虑你潜在的回报——风险比率。</p>
<p>大多数人认为，在他们以48美元的价格买进100股股票时，4800美元都成为了赌注。如果你非常清楚何时该退出市场并具备这样做的能力，那么事情就不是这样。你的停价水平事先就限定了初始风险R，作为交易商，你的主要工作应该是设计一个将为你赚到相当于较大的R乘数利润的计划。想一想我这句话的含义：作为交易商你的主要目标之一应该是筹划R乘数较大的交易。</p>
<p>记住，止损停价的首要目的是设置你可以容忍的初始R值。如果R值较小，你就有可能实现R乘数较大的盈利的交易。然而，小幅的停价也很可能会让你在给定的交易上输掉，而且还会降低入市技巧的可靠度。记住随机入市系统的可靠度大约是38%，它应该达到50%，但是所增加的12%的亏损概率是由交易成本以及我们有一个停价（虽然是很大的停价）这一事实造成的。更紧密的停价将会进一步降低可靠度，它有可能会在一次对你有利的大的移动发生之前就将你截住。你可以在另外一个人市信号下马上再次入市，但是这样的交易多了会带来非常大的交易成本。</p>
<p>因此，了解一下对你可能使用的止损停价标准有用的一些准则是非常重要的。这些准则包括：①假如你的入市技巧并不比碰运气好多少，那么就将你的停价置于市场噪声之上；②找出你所有盈利交易的最大的不利偏移量，并以这个值的一定比率作为停价标准；③使用一个紧密的停价，可以给你带来具有较高的R乘数的交易；④基于你的入市理念使用一个合理的停价。下面让我们来考虑每一个准则。</p>
<h2 id="超越噪声"><a href="#超越噪声" class="headerlink" title="超越噪声"></a><span style="color:#00ACC1;">超越噪声</span></h2><p>市场日复一日的行为可以被视为噪声。例如，如果价格移动了一两个点，你根本不知道这是因为几个做市商在“引诱”交易指令还是存在大量的市场行为，而且即使存在大量的市场行为，你也不知道它是否会继续下去。因此，我们假定市场中的日常行为主要是噪声是合理的。把你的停价设在诸如此类可能的噪声范围之外也许更好。</p>
<p>但是对噪声范围的合理估计是多少呢？有些人喜欢使用趋势线来确定其停价应该设在哪里。例如，图10-1描述了一条股票空头可以用来确定合理的停价水平的趋势线。你还可以使用支撑位和阻力位来设定停价。例如，一位技术交易商会认为股票在56.50美元的价位上有大量的支撑力量，在这一价位上正在发生的一些事情（即支撑力量）阻止了价格的进一步下跌。如果这一价位上升到趋势线以上，短期交易商甚至可能会做多头，而且这位交易商会使用56.50美元价位的支撑力量作为一个停价水平。</p>
<blockquote>
<p>图10-1 在一个下跌的市场中止损</p>
</blockquote>

<p>但是如果价格跌破56.50美元又会怎样呢？一位技术交易商会说再没有任何支撑力量了，因此它会一直跌下去。这个56.50美元就变成了阻力，他们可能会发出停价指令，在这个水平上补进空头头寸。</p>
<p>图10-2描述了处于显著的上升趋势中的巴西ETF（交易所交易基金）。一位趋势跟踪者肯定想在此做多头，他可以将其停价置于趋势线之上，或者是在图上的理论支撑位上。</p>
<blockquote>
<p>图10-2 在一个上涨的市场中入市</p>
</blockquote>

<p>不过，这一特定的策略存在的问题是每个人都知道这些停价在哪里，它们在趋势线上或者支撑位和阻力位上。通常的结果是，市场往往在其悄无声息地沿着趋势的方向回归之前，就在相反的方向上发生了崩溃，所有人的停价指令都得到了执行。</p>
<p>你可能需要考虑将保护性停价置于一个对市场而言“不符合逻辑”，但又在噪声之上的水平上。假定噪声是由一天的活动来代表的-一整天的行为主要是噪声。这一天的活动可以由平均真实波幅来表示。如果对过去10天的这种行为取平均（一个10天的移动平均），你就对每日的噪声量有了一个很好的估计。现在，用2.7和3.4之间的某个常数乘以平均真实波幅的10天移动平均，就可以得到一个足够远离市场噪声的停价。这对期货市场上大多数长期趋势跟踪者或许是一个不错的停价法则。希望长时间持有头寸的股市交易商可能需要使用3倍于每周波动量或10倍于每日波动量的停价。</p>
<p>你对一个距离很远的停价的反应可能会是“我从未想在任何一个头寸上冒这么大的风险。”然而，可以从另外一个角度来看待这一问题—在读完确定头寸规模一章后你就会更加明白。停价水平控制着你每单位的风险，而头寸规模确定控制着你全部的风险。因此，你可以使用一个10倍于平均真实波幅（ATR）的较宽的停价，而利用头寸规模确定将全部的风险降低到资本的0.25%。因此，一个较宽的停价范周并不意味着大量的风险—如果头寸规模很小或者是最小限度的。如果承受这么大风险的一个最小单位对你似乎意味着一大笔钱的话，那么你也许不应该使用这个特别的工具进行交易——要么是它不是一个好的机会，要么是你的资本不足。</p>
<p>还要记住的是，初始停价是最坏情形下的风险，也就是R单位。你的大多数损失也许都小于1R，因为随着市场的移动和时间的推移，你退出市场的点也会上移。</p>
<p>为了更好地理解这一点，回头看看图9-2描述的长期股票交易系统中显示的亏损分布。</p>
<p>2，最大不利偏移</p>
<p>约翰·斯威尼， 《股票和商品技术分析》的前任编辑，介绍了进军证券交易的理念。如果你理解了前面提到的R的概念，就会理解斯威尼在关于“进军证券交易”的文章中所要传达的思想。以我的理解，进军证券交易就是要懂得，一旦进入了一笔交易，交易的成功更多的是价格移动的结果，而不是入市的结果。</p>
<p>让我们来考虑偏移的概念，它是指价格自入市点之后的变化。在开始考虑价格自入市点之后的移动时，你就会知道几个非常有意思的概念。第一个就是最大不利偏移（MAE），这是在整个交易期间你有可能会碰到的不利于头寸的最坏的一日内的价格移动。这种最坏的情形通常发生在这一天的最高价或最低价，取决于你是多头还是空头。</p>
<p>图10-3描述了一个多头在入市后价格发生不利偏移的例子。这是一个条形图，黑线描述的是多头信号方的价格数据给出的MAE，这里，MAE是812美元，而初始停价（就是3倍于ATR的停价，这里没有显示出来）在3582美元之外。因此，MAE小于所使用的停价价值的25%。</p>
<blockquote>
<p>图10-3 一笔盈利交易中的最大不利偏移（1985年）</p>
</blockquote>

<p>图10-4是一笔亏损交易中不利的价格偏移。1985年9月23日在85.35点建立多头头寸，停价是5343美元之外。MAE是80.9-潜在的损失达到了2781.25美元。然而，停价仍然低于这一价格几千美元。最终，价格上涨了，停价也上升了，清仓损失1168.75美元-这一损失既不靠近停价，也不靠近最大不利偏移值2781.25美元。对这笔亏损的交易而言，MAE是最终亏损的2倍，但只是初始停价值的一半。</p>
<blockquote>
<p>图10-4 一笔亏损交易中的最大不利偏移（1985年）</p>
</blockquote>

<p>设计一张表格来表示盈利和亏损交易的MAE，在这个例子中，利用一个管道突破系统和一个3倍于ATR的停价值来考察7年时间里英镑的交易。在表中，盈利和亏损交易是分开的。表10-1给出了这些交易的利润或损失以及MAE的值。注意把MAE表示成为R的函数是很有意思的—约翰·斯威尼没有想到这一点。</p>
<p>表10-1 英镑交易中的利润和亏损以及MAE值</p>
<p>这是一个小样本，只是用来解释如何使用这一技巧。注意盈利和亏损交易之间的区别，在MAE大于0.5R时，没有很多交易是盈利的，在24笔盈利的交易中只有3笔（12.5%）的最大不利偏移大于0.33R，相比之下， 66.7%的亏损交易的MAE大于0.33R，而且几乎其中一半大于0.5R，你注意到这里的模式了吗？盈利交易的MAE平均是0.14R，利润是1.65R，亏损交易的MAE平均是0.5R，而平均利润是0.63к. =<br>在编辑这些数据时（并给自己一个足够大的停价），你将会发现盈利交易的MAE很少低于某一个值，换句话说，好的交易很少背离我们太远。如果不断检查这个数值的大小（假如市场发生变化），你将会发现可以使用比你最初期望的紧密好的交易很少背离我们太远。</p>
<p>得多的停价。表10-1中的数据表明在这些交易中采用2ATR的停价要比采用3ATR的停价有效得多。如果采用比较紧密的停价，在这些盈利交易中，你一笔都不会被截住。对于有些亏损的交易，你的损失也应该会更小，而所有交易的R乘数都会增大。然而，这些结论都是在某种曲线拟合的事实之后通过考察数据得出的。不过，一般而言，更紧密的停价的好处包括更小的亏损（尽管你可能会多遭受几次这样的亏损）以及盈利的交易可以有更大的R乘数。</p>
<p>3，紧密的停价</p>
<p>紧密的停价范围可以用于某些条件下，比如当我们预测到市场要发生一次大的</p>
<p>9注意由于价格差异和佣金的存在，损失可以大于1R和MAE，此外，在停价以对你有利的方式开始移动之前，如果MAE在交易中出现较早，那么MAE可以大于你的最终损失。</p>
<p>移动而市场也开始证实了这一预测时，在考察较短时间框架内的数据时也可以使用紧密的停价。如果你的交易方法允许更紧密的停价，请记住这也是你个人的容忍能力在起作用，那么你就有一些很大的优势。首先，在你中止交易时每单位交易可以少亏很多钱；其次，因为你的损失很小，因此可以多次努力捕捉大的移动；最后，一旦你抓住了一个大的移动，就会给你带来R乘数很大的利润。</p>
<p>然而，紧密的停价也有一些严重的缺陷。首先，它将降低系统的可靠度。你不得不做很多笔交易来获取利润。如果你不能容忍大量小笔损失（很多交易商和投资者就不能），紧密的停价范围就会让你破产。</p>
<p>其次，紧密的停价还会让你的交易成本急剧增加，因为市场专业人士开发的系统确保了无论你对自己的账户做什么，他们都可以从中获利。交易成本是交易的-个主要部分，做市商从买卖价差中获利，经纪公司获得佣金。你投资任何名目的基金，他们都会根据你的投资规模收取费用。实际上，一些系统很多年来产生的利润比其交易成本多不了多少。例如，在2004年，我的频繁交易系统创造了扣除交易成本之后30%的回报，但是交易成本仍然占到了初始账户金额的大约20%。因此，我获得总利润的60%，而经纪人获得40%的交易成本部分。如果你总是进出市场，这些交易成本会把你的利润吞噬殆尽。如果你的交易规模很小，这会成为一个主要的因素，因为每笔交易的成本非常高。</p>
<p>对大多数人来说，中止一笔交易时能少赔很多钱也许是令人激动的结果。然而，作为交易商，最坏的情形是错过一次大的移动。因此，如果你再次得到信号，一定要马上返回市场。很多人无法忍受连续3-5次的亏损，而这样的结果是该策略经常会产生的。不过，让我们假定每次退出市场会产生100美元的损失，你在连续的市场退出中，亏了5笔交易，然后，市场突然出现了你所期望的移动。一周以后，你退出市场时获利20R，即2000美元。你赔了5笔，赚了1笔。你只在不足17%的时间里是正确的，大多数人对此都难以接受，但是你6笔交易总的利润减去佣金和价格差异之后是1500美元。9<br>在这种情况下，你必须要明白所发生的事情。假定你使用了诸如3倍于ATR的比较宽的停价，同时假定这里3倍于ATR的停价是600美元。如果你正确地预测到了市场的移动，你就完全可能不会被截住。结果，你可能只做了一笔3.33R利润为2000美元的交易，但是你的总利润是1900美元，包括100美元的价格差异和佣金。</p>
<p>e如果每笔交易的价格差异和佣金是100美元，你要从1500美元的利润中扣除600美元，这让你20R的利润现在看来只有9R的利润。这就是短期交易商在其交易中必须要考虑交易成本因素的原因。这可能是影响短期交易成功的主要因素。</p>
<p>在上面的例子中，在扣除损失和价格差异与佣金之后，你只赚了900美元。</p>
<p>在停价是600美元时，如果你需要两次努力获取利润，其结果仍然要比100美元的停价水平高一些。你获利的交易可以带来2000美元的利润，但是一笔赔钱的交易就损失了600美元-净利润是1400美元。扣除200美元的价格差异和佣金，现在还可以赚到1200美元的净利润，这仍比第一个例子做6笔交易才能获取利润要好。不过，如果没有对价格差异和佣金进行调整，你就不会得出这样的结论。</p>
<p>如果停价是600美元，在遭遇多次失败之后，你的利润会急剧下降。在获取2000美元的利润之前，如果被截住了两次，那么你的净利润只有500美元；如果被截住了三次，那么你就只剩下200美元的净亏损了。</p>
<p>我举出以上这些例子，是想说明不要小看保护性停价，必须根据你的目标和性情做出慎重的选择。</p>
<h1 id="利用合理的停价"><a href="#利用合理的停价" class="headerlink" title="利用合理的停价"></a>利用合理的停价</h1><p>在选择要采用的停价类型时，最重要的因素是考虑它对你的目标、所交易的理念的特点以及你的性情来说是否合理。你必须使用合理的停价。让我们来看看你或许可以考虑采用的其他一些类型的保护性停价，并分析其所包含的问题。</p>
<p>1，美元停价</p>
<p>很多交易商提倡使用美元停价。这种停价策略多少有些心理方面的优势-你计算出一笔交易愿意承受的损失，并将其定为自己的停价标准。此外，美元停价还有一些技术优势。首先，这种停价不是很容易预测的，大多数人都不可能知道你在什么价位进入市场，因此，他们也不可能计算出你的停价是1 500美元还是1000美元之外。其次，当这种停价大于MAE时，会成为很好的停价。你只需确定在给定的笔合约中MAE可能是多少美元，然后将停价定在稍高于这一金额之上即可。</p>
<p>然而，有些人把这种停价和头寸规模确定混为一谈，因而忽视了头寸规模确定。这些人认为如果你想承担资本1%的风险，而你有10万美元，那么就把停价定为1000美元之外，并将其称为资金管理停价。这是很幼稚的。</p>
<p>如果你是这样设定停价的，请不要和头寸规模确定混为一谈。头寸规模确定是系统中确定你利用该系统进行交易有可能赚到多少钱最重要的部分。不要以幼稚地设定资金管理停价而放弃了系统中最重要的组成部分。</p>
<p>2，百分比折回停价</p>
<p>有些人通过允许价格自入市价格折同一定的百分比来设置停价，这在股票交易商中非常常见。例如，你以30美元的价格买了股票，如果它折回10%到27美元，那么你就决定卖掉它。利用这种10%的折回方法， 10美元买的股票在价格跌到9美元时，你会决定卖掉，而100美元买的股票在跌至90美元时你会卖掉。</p>
<p>如果折回方法是建立在某种MAE分析基础之上的，那么这是不错的方法。但是如果你只是凭空想象出一些数字—这是很常见的—那么利用这样的停价，你很可能把大量的潜在利润拒之门外。</p>
<p>3，波动幅度停价</p>
<p>波动幅度停价是建立在这样的假定基础之上的，即波动幅度在某种程度上代表市场中的噪声。因此，如果你把停价设定为ATR的几倍（前面举的例子是ATR的3倍），那么你可能会有一个超出当前市场噪声的不错的停价。我个人认为波动幅度停价是可以选用的最好的停价之一。</p>
<p>4.Dev-停价</p>
<p>辛西娅·凯斯在她的书《以概率进行交易》中发明了“Dev-停价”这个词，并用了一整章的篇幅来讨论这个问题。如果价格成正态分布，那么无论朝着哪个方向，一个标准差的价格变化都相当于价格分布的大约67%，两个标准差将占大约97%。市场价格一般不是正态分布的—它们往往向右偏斜，因此，需要将这种偏斜考虑进去并对标准差进行一些修正。第一个标准差要做10%的修正，第二个标准差要做20%的修正。</p>
<p>你可能会发现将ATR的标准差作为停价是相当有用的。计算出过去30天的平均真实波幅以及标准差。这个平均真实波幅加上一个标准差再加上10%的修正因素，就可以作为一个停价的水平。这一真实波幅加上两个标准差再加上20%的修正因素，就可以作为另外一个停价水平。</p>
<p>5．管道突破和移动平均停价</p>
<p>正像管道突破和移动平均的概念可以用于入市技巧一样，它们同样可以用于停价。我个人的观点是这些停价不如基于平均真实波幅或MAE之上的停价好。不管怎样，为了完整起见，还是需要简要讨论一下。</p>
<p>移动平均交叉点是一种常见的人市技巧，我们在第9章进行了深入的讨论。当拥有两个移动平均时，基本上就有了一个反转的退出策略。如果已经建立了头寸，而且短期平均与长期平均交叉，你就会既有一个让你退出当前头寸的策略，又有一个相反方向的反转入市信号（做多头还是空头，取决于交叉的方向）。当然，这些系统存在的问题是，你总是待在市场中，会多次遭遇双赔。</p>
<p>R.C.艾伦把三个移动平均系统推而广之，在两个短期平均与较长期的平均交叉时，就会获得一个入市信号。从定义来看，这就意味着最短期的平均值现在是在顶点（或低谷）。当最短期信号与中期信号交叉时，就获得了停价信号，但是只有在短期和中期平均与长期平均交叉时，你才可以获得一个建立空头头寸的反转信号。</p>
<p>第9章也讨论了管道突破。例如，在价格创了最近40天的新高时，就可以入市。你的停价也可以是一个管道突破点—在价格创了最近20天的新低时。该方法的一个优点是给价格较大的回旋余地，并且远远超越了噪声，很多知名的交易商都加以采用。但是，它也有一个很大的缺点，就是会把你大量的利润返还回去，因为你的停价既可以是最坏情形的保护性停价，也可能是获利退出。</p>
<p>6.时间停价</p>
<p>很多交易商和投资者都说，如果一个头寸没有相当快地做出对你有利的反应，那么它可能就再也不会了。因此，就有了另外一种常用的止损方法：时间停价。时间停价就是在一个固定的时间后，如果还没有实现利润（或者所获得的利润没有达到一定水平之上），它就会让你退出这一头寸。</p>
<p>位了不起的交易商说他把交易中的每一天都当做是全新的一天。如果他找不出充足的理由来说服自己在那天进行一笔交易，那么干脆就退出来。这就是一个有效的时间停价。</p>
<p>时间停价的选择因人而异。如果你是一位长期交易商，在你所期望的大的移动突然出现又没有办法返回市场时，那么就不要使用时间停价。另外，如果你不能顺利地返回已经退出的头寸，那么也不要使用这种方法。如果你喜欢短期交易，那么时间停价则可能是你可以使用的又一个有力武器。</p>
<p>但在使用时间停价之前，先检查一下它们在你的方法的框架之下是否有效。一个日交易商可能使用10分钟的时间停价，而一位长期投资商可能使用一个月的时间停价。假如你决定使用一个3天的时间停价，在使用前，你需要确定这样一个停价标准的有效性：一个头寸3天没有任何进展，其突然发生好转的概率如何？如果可以找到足够多的例子表明你可能会错过一次大的移动，那么就要避免使用这样的停价。但是，如果你发现这种方法总是很快地止住了你的损失，或者帮助你防范了损失的发生，那么务必将其列入你的停价标准之中。</p>
<p>7，任意停价和心理停价</p>
<p>如果你对市场有很好的直觉，那么就可以考虑任意停价—它可能也是一种时间停价。很多最优秀的专业交易商就使用任意停价，但是我并不建议业余交易商和新手使用这种方法。</p>
<p>相比之下，对大多数市场玩家来说，心理停价是非常不错的。除非你在市场中只想做长期，也就是说，你想持有一个头寸至少1年，否则你应该考虑一下心理停价。长期趋势跟踪交易商使用这种停价也会存在问题，因为一笔好的交易可以顶得上一年的交易。除非你能在心理上平衡好，否则你有可能在一笔大的交易刚要出现时，就决定休假或者使用心理停价了。</p>
<p>总有些时候，交易中最重要的因素-你，就是人类自己-会感到不是特别适意。这时你该考虑离开市场了，因为这些时候几乎就预示着某种灾难的发生，比如： ①当你正经历离婚或者与某位对你很重要的人分离； ②当你生命中一个很重要的人去世或因病住进医院； ③当一个孩子诞生，你的生活方式发生了巨大的变化；<br>④当你搬家或换了办公室；<br>⑤当你在心理上筋疲力尽，几乎要垮掉了；<br> ⑥当你卷入场官司之中；0当你看到头寸规模一夜之间翻了一番-甚至在市场还没有发生移动时就激动不已。这些都是你应该关闭所有频繁交易的头寸的时候。这些心理停价是你可以使用的最重要的方法之一。因此，除非你是一位长期交易商，否则我强烈建议你开始使用这些方法。</p>
<h1 id="常见系统采用的停价"><a href="#常见系统采用的停价" class="headerlink" title="常见系统采用的停价"></a>常见系统采用的停价</h1><p>1，股市系统</p>
<p>（1）威廉·欧奈尔的CAN SLIM方法。威廉·欧奈尔不主张使用与市场相关的停价，但是，他还是认为永远不要让一只股票背离你7%甚至8%以上。这也是一种我们前面讨论过的百分比折回的方法。从根本上说，欧奈尔的7% -8%指的是股票价格的折回—和你的资本没有关系。因此，如果你用20美元买了一只股票，永远不要让它背离你到20美元的7%-8% ，即1.40-1.60美元。如果你用100美元买了一只股票，那么永远不要让它背离你7-8美元以上。欧奈尔警告说，7%-8%应该是能忍受的最高亏损限额。他实际上是建议你所有损失的总体平均应该大约在5%～6%的水平。</p>
<p>尽管欧奈尔的指导方针是所推荐的有关股票交易的方案中最好的方法之一，但我仍然认为还有改进的余地。使用基于市场基础的停价，结果会更好。利用欧奈尔的系统确定MAE，应该根据不同的价格范围进行计算。低价位股票，即低于25美元的股票，如果买得好，它很少会背离你1美元以上，那么你的停价可能就是1美元。即使是100美元的股票，如果买得好，也很少会背离你2美元以上。如果是这样，那么你在高价位股票上获取大的R盈利的潜力就是巨大的。</p>
<p>既然欧奈尔建议你在市场突破底部时进入市场，那么在市场回到底部时，或者至少在它回到底部的谷底时，你也许就应该退出了。另外一种可能的退出策略是，如果移动背离了你每日价格平均波动的3倍，你就该中止头寸了。</p>
<p>（2）沃伦·巴菲特的投资方法。根据大多数有关沃伦·巴菲特的书的说法，他把自己拥有的股票都视为终生持有。他觉得他的回报在长期里会足够大，能够经得住市场心理起伏的影响。此外，他也不想为进出市场而支付交易成本，更不用说税费。因此，沃伦·巴菲特认为他的主要工作就是去买他愿意永远拥有的公司。因此，巴菲特看上去好像没有任何保护性停价：</p>
<p>我从不试图在股市上赚钱。我买进的时候就假定市场会在第二天关闭，而且在5年里不会再开盘。</p>
<p>不过，据说巴菲特偶尔也会卖掉自己的投资。记住，保护性停价是在最坏的情形下用来保护你的资本的手段。因此，我确信，巴菲特一定会定期审查他的投资以确定它们是否仍然满足他的标准。你对投资的选择、公司运作的理解以及对公司是否经营良好的评估越精明准确，你就越可以使用这种方法。不过，我强烈建议，即使最坚决的长期投资者也要在投资之始就了解每笔投资在最坏情形下的救赎信号。通常情况下，解决办法是在价格发生不利变化达到25%时就发出停价指令。如果价格相对于入市时下跌了25%，那么就退出市场保护你的资本。</p>
<p>2，期货市场系统</p>
<p>（1）佩里·考夫曼的适应性移动平均方法。考夫曼在谈到止损停价的本质时，提出了一个很有意思的观点。他说，不利于你的、涨落不定的价格移动规模乘以移动可能发生的次数总是差不多的。比如，你可能会遇上20次5个点的移动， 10次10个点的移动和5次20个点的移动。所有这些的加总就是100个点的损失，再加上价格差异和交易成本。因此，他认为较大范围的停价一般更好，因为它们可以使交易成本最小。</p>
<p>考夫曼在书中检验一个系统时，只使用了几个简单的停价理念。首先，如果损失超过了一个预定的百分比水平，交易就在收盘时退出。这与欧奈尔的理念非常像。其次，在反转信号发出时，包括当交易发生亏损时，交易就要停止。</p>
<p>在我看来，本章所讨论的很多理念都可以在很大程度上改进适应性移动平均系统。例如，你可以考虑使用一个波动幅度停价、一个MAE停价或者一个Dev-停价。（2）威廉·加拉赫的基本面交易。加拉赫是一位基本面分析交易商。在基本面关系是市场按照特定的方向移动的前提条件时，他利用市场的基本面关系进行商品交易，在一个10天的管道突破点进入市场。他的止损停价很简单，就是一个相反方向的10天的管道突破。</p>
<p>尽管加拉赫的交易背后有很多理念是非常合理的，但是我相信，读者会发现本书所推荐的止损停价的很多方法可以大大地改进这一简单的交易方法。</p>
<p>（3）肯·罗伯茨的1-2-3方法。记住肯·罗伯茨的方案是市场出现了一个9个月的最高价或最低价，然后出现了1-2-3模式。人市信号是市场在与原来的最高价或最低价相反的方向上突破新的价格极点时，换句话说，就是当市场再次经过1-2-3模式上的点2时，你就进入市场。止损停价就是将停价置于图表中一个符合逻辑的点上-就是在点1之上。</p>
<p>同样，我认为在使用这种方法时，如果使用一个基于统计极点的停价会更好。这种停价可能包括3倍的ATR、一个Dev.停价或者在这种特定情形下对MAE的估计和在此估计之上的一个停价。</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>保护性停价像是红灯，你可以闯过去，但是你不可能非常安全。</p>
<p>保护性停价有两个主要的作用：<br>①它设定了你每一个头寸有可能承受的最大损失（R）；<br>②它给出了一个度量随后的收益的基准。</p>
<p>作为交易商或者投资者，你的主要工作应该是设计一个能为你赚到初始风险R好多倍的利润计划。<br>在你发出停价时，考虑超越噪声。这可以通过把你的停价设定为几倍于ATR的水平，通过使用Dev-停价或通过确定MAE并超过这一数值来实现。</p>
<p>紧密的停价范围具有产生大的R乘数盈利交易和将亏损最小化的优点，其缺点是，会降低可靠度以及大大增加交易成本。因此，如果你的入市策略规划得很好，那么你或许就应该只使用紧密的停价。</p>
<p>其他的停价包括美元停价、百分比折回停价、波动幅度停价、管道突破停价、移动平均停价、支撑位和阻力位停价、时间停价和任意停价。每一个都有各自的优点，从中选择一个适合你的，是设计一个适合你的交易系统工作的一部分。</p>
<p>你对停价的看法是什么？只有利用一个与你有关停价的看法相吻合的系统进行交易.你才会感到舒服。</p>
<!-- flag of hidden posts -->
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/通向财务自由之路/" rel="tag"># 通向财务自由之路</a>
          
        </div>
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="CheBin">
            
              <p class="site-author-name" itemprop="name">CheBin</p>
              <div class="site-description motion-element" itemprop="description">绝知此事要躬行，不动手就是懒。一篇文章看10遍，而不是10篇文章看1遍。</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">438</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">15</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">44</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          


          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li>
                    <a href="/2021/12/21/34｜业务开发（下）：问答业务开发/" title="34｜业务开发（下）：问答业务开发" target="_blank">34｜业务开发（下）：问答业务开发</a>
                  </li>
                
                  <li>
                    <a href="/2021/12/21/33｜业务开发（上）：问答业务开发/" title="33｜业务开发（上）：问答业务开发" target="_blank">33｜业务开发（上）：问答业务开发</a>
                  </li>
                
                  <li>
                    <a href="/2021/12/21/32｜通用模块（下）：用户模块开发/" title="32｜通用模块（下）：用户模块开发" target="_blank">32｜通用模块（下）：用户模块开发</a>
                  </li>
                
                  <li>
                    <a href="/2021/12/21/31｜通用模块（上）：用户模块开发/" title="31｜通用模块（上）：用户模块开发" target="_blank">31｜通用模块（上）：用户模块开发</a>
                  </li>
                
                  <li>
                    <a href="/2021/12/21/30｜设计先于实战：需求设计和框架搭建/" title="30｜设计先于实战：需求设计和框架搭建" target="_blank">30｜设计先于实战：需求设计和框架搭建</a>
                  </li>
                
              </ul>
            </div>
        

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#停价的作用"><span class="nav-number">1.</span> <span class="nav-text">停价的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#超越噪声"><span class="nav-number">1.1.</span> <span class="nav-text">超越噪声</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#利用合理的停价"><span class="nav-number">2.</span> <span class="nav-text">利用合理的停价</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#常见系统采用的停价"><span class="nav-number">3.</span> <span class="nav-text">常见系统采用的停价</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#小结"><span class="nav-number">4.</span> <span class="nav-text">小结</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CheBin</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">4.2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">64:10</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
