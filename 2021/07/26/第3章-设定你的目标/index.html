<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">
<meta name="keywords" content="通向财务自由之路">
<meta property="og:type" content="article">
<meta property="og:title" content="第3章 设定你的目标">
<meta property="og:url" content="http://yoursite.com/2021/07/26/第3章-设定你的目标/index.html">
<meta property="og:site_name" content="车斌的技术博客">
<meta property="og:description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-11-05T07:44:00.331Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第3章 设定你的目标">
<meta name="twitter:description" content="思考并回答以下问题：  总结一下，这章作者最主要想表达什么观点？">






  <link rel="canonical" href="http://yoursite.com/2021/07/26/第3章-设定你的目标/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>第3章 设定你的目标 | 车斌的技术博客</title><meta name="robots" content="noindex">
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">车斌的技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">放弃会成为一种习惯</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/26/第3章-设定你的目标/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CheBin">
      <meta itemprop="description" content="看视频才能学会，看文字学不会的">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="车斌的技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">第3章 设定你的目标

              
            
          </h1>
        

        <div class="post-meta">

          

          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2021-07-26 11:22:22" itemprop="dateCreated datePublished" datetime="2021-07-26T11:22:22+08:00">2021-07-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2021-11-05 15:44:00" itemprop="dateModified" datetime="2021-11-05T15:44:00+08:00">2021-11-05</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/期货/" itemprop="url" rel="index"><span itemprop="name">期货</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">9.1k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">8 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>思考并回答以下问题：</p>
<ul>
<li>总结一下，这章作者最主要想表达什么观点？</li>
</ul>
<a id="more"></a>
<p>一个有目标的人，众人、世界，有时甚至是坟墓都会为他让路，而那些漫无目的的随波漂流者则只会被唾弃。——古罗马谚语</p>
<p>现在你明白了寻找圣杯就是内在的寻找，另外，你应该知道什么有可能会妨碍你。现在该你决定想要什么了。萨姆与我交换了10分钟的意见，因为他看起来似乎无法得到令他满意的结果。因此，我在一次商务旅行结束之际，在芝加哥的奥黑尔菲尔德机场见了他一面。我们的谈话大致如下：</p>
<blockquote>
<p>我能帮你些什么吗，萨姆？<br>哦，我只是觉得我的交易结果没有上路。<br>“没有上路”指什么？<br>我对结果不满意。<br>你今年在市场中的交易目标是什么？<br>哦，我真还没什么目标。<br>你今年想在市场中实现什么？<br>（停顿了好一会儿）我想用赚到的钱为我妻子买一辆汽车。<br>好，那么是什么款式的汽车？劳斯莱斯？奔驰？凌志？还是小载货卡车？你想给你妻子买辆什么样的车？<br>就是一辆美国车，一辆大概15000美元的车。<br>很好，你想什么时候买？<br>9月份，就是大概三个月后。<br>好的。你的交易账户中有多少钱？<br>大约10000美元。<br>这么说来，你想用大概三个月的时间让你的账户获利150%？<br>是的，我想是的。<br>你有没有意识到三个月盈利150%相当于一年差不多1000%的回报率？<br>没有想过。<br>为了赚到那么多钱，你愿意亏多少？<br>不知道，我真的没有想过这些。<br>你愿意亏5000美元吗？<br>不会，那可不行，亏的太多了。<br>那你愿意亏2500美元吗？就是25%。<br>不行，还是太多。也许10%还行。<br>也就是说，你想三个月从市场中获利150%，同时只愿意承受10%的风险？<br>是的。<br>你听说过有哪种交易方法可以让你连续获得15：1的回报一风险率？<br>没有。<br>我也从来没听说过，3：1通常都很好了。</p>
</blockquote>
<p>虽然有很多交易和投资方法可以赚到大钱，但我从未听说哪种方法可以满足那种要求的。可是，大多数只用一点钱着手投资的交易商和投资者却都怀有类似这样的期望——都是一些他们不可能达到的期望。</p>
<h1 id="设计目标是系统工作的主要部分"><a href="#设计目标是系统工作的主要部分" class="headerlink" title="设计目标是系统工作的主要部分"></a><span style="color:#339AFF;">设计目标是系统工作的主要部分</span></h1><p>我曾经与某人一起工作，他出钱给那些成长型的商品交易顾问（CTA），其部分工作是评估这些CTA所开发的各种各样的系统，所以很多人认为他是系统开发的世界级专家之一。</p>
<p>有一天我对他说：“如果你能给那些正在试图提出一个新系统的交易商某些具体的建议，那会是什么？”他的回答是：“至少要把系统开发50%的时间用在制定目标上。”他说目标是任何系统的关键部分，然而却很少有人情愿在这上面花时间。如果你打算开发一个用于市场交易或投资的系统，那么在开始之前，先仔细考虑好你想要达到的目标。</p>
<p>目标是系统的关键部分。如果你都不知道要系统做什么，又怎能开发出一个交易系统来呢？同样，当你都不知道自己想去哪儿时，又怎能到那儿呢？因此，你需要首先确定想要实现的目标，然后才能判定该目标是否现实。如果能，那么你才能开发一个交易系统来实现这些目标。</p>
<p>我将第一次做研讨会时朋友的建议牢记在心中，“怎样开发一个适合你的成功的交易系统呢？”那次研讨会的主要内容就是关于目标。然而，相当多的人对我把目标作为研讨会的一部分而怨声载道，所以我现在要求研讨会的参加者在会前要先完成目标设计。</p>
<p>具有代表性的抱怨有：“这和在市场上交易有什么关系？”“这是私人信息，我不想在课上花时间谈论我的资产或任何诸如此类的问题。”他们当中好像没有一个人认识到，如果不花时间在目标设计上，就无法真正开发出一个适合他们的系统。他们需要评估自己的优势和劣势；评估时间、资源、资本和技能以及想要实现的目标。我们想实现什么样的回报？为实现这些回报，我们愿意承受什么样的亏损？这是我们寻找圣杯的真正答案之一。</p>
<h1 id="汤姆·巴索与目标"><a href="#汤姆·巴索与目标" class="headerlink" title="汤姆·巴索与目标"></a><span style="color:#339AFF;">汤姆·巴索与目标</span></h1><p>汤姆·巴索是我们所举办的前三次关于系统开发研讨会上的嘉宾演讲者。在研讨会期间，为了向大家展示应该如何着手设计目标，我曾数次就他在目标设计方面的工作对他进行了采访。汤姆·巴索非常热情，乐意为本书再接受次采访。</p>
<p>在我的推荐下，杰克·施瓦格在他的书《股市奇才：美国股市精英访谈实录》中采访了汤姆。</p>
<p>这次采访结束之后，汤姆管理的资产增长到了5亿美元以上，而汤姆也作为专业基金经理退了休，他正享受自己的退休生活。</p>
<p>之后，施瓦格就把他称为“平静先生”，并认为汤姆是他采访过的所有市场奇才中最好的典型个体角色。汤姆也是我所见过的最有逻辑性与组织性的人之一。因此，我想你可能也想知道汤姆是如何考虑交易系统开发的。</p>
<p>目标练习的第一部分是：你要清点一下自己的时间、资本、技能以及其他资源。</p>
<blockquote>
<p>汤姆，你有多少资本？<br>我们目前管理的资本大约有9500万美元。<br>你每年生活需要多少钱？<br>大约80000美元。<br>其中有多少必须出自你的交易利润？<br>一点不用。我从Trendstat领取工资。</p>
</blockquote>
<p>我问这个问题是为了确定一个人若仅仅为了生存需要赚到其交易资本的百分比，这对确定其目标是否合理是很重要的。比如，那些仅仅为了生存必须赚到30%或者更多的人，就将自己置于了难以为继的境地，而且其交易资本也难以获得增长的机会。</p>
<p>我经常遇到一些人，他们的交易或投资资本大概只有10万美元，可是每年生活就需要5万美元。在我看来，他们把自己置于了非常困难的境地。他们可能相信自己能实现每年100%的回报率，也许他们真的能，但是如果一开始就亏损30% （这是很有可能的），那么他们就会变得不堪一击。这就是为什么在你身陷其中之前最好先考虑一下这些情形。显然，这些对汤姆·巴索来说都不是问题。</p>
<h2 id="自我评估"><a href="#自我评估" class="headerlink" title="自我评估"></a><span style="color:#00ACC1;">自我评估</span></h2><blockquote>
<p>汤姆，你每天必须在交易上花多少时间？（这很重要，因为有多少时间可以利用几乎决定了你必须开发什么样的交易系统。那些有全职工作，只是每晚看一下市场的人，显然必须找到一个相当长期的系统来使用。）<br>我每天大约花6个小时，但这些时间大都是用来管理我们的交易的。在你交易时，你能料到会有多少分心的事情？很多。<br>那么显然，你需要一种能让你克服这些分心事的方法。<br>是的。<br>你预计要多少时间来开发你的交易系统，处理个人心理工作以及制订进行交易的业务计划？<br>对于我来说，在过去的20年中我已经投入了很多时间，然而，我们还是一直在计划、研究，需要多少时间我就投入多少时间。<br>你的电脑技能怎么样？在你开始从事交易事业之前需要什么样的技能？<br>我非常精于电脑。我自己把Trendstat所有的早期模型都编制成了程序，而现在我的办公室是全自动化的，有全职的编程员。我的工作只是查找无效之处，并确保程序员加以解决。<br>你对统计学了解多少？<br>我懂且能运用一些简单的统计，另外，我还熟悉一些多元统计。<br>你对自己的市场知识如何评价？ （这里的市场知识应该包括交易机制，是什么在推动市场，如何低成本有效地执行订单以及你可能需要哪些交易指标等方面的知识。）<br>我在期权、期货、股票、债券、共同基金和外汇交易方面有丰富的经验。我对交易机制和低成本执行订单非常熟悉。对市场如何运作我也有自己的看法。<br>你的心理优势和弱势是什么？尤其是在交易系统开发方面。<br>我非常有战略眼光并富有耐心，而且我相信这些品质对于开发长期的交易策略是非常有用的。我很自信，这就在心理上给了我很大的力量信任我们自已开发的系统。说到弱点，我总是想一下子做很多工作，也许太多了，这应该是我的弱点，有时候这会分散我作为一个交易商去完成自己的主要任务的精力。<br>你在自我约束方面的优势和弱势是什么？<br>我在自我约束方面非常好，持续执行一个系统对我毫无问题。<br>你会不会很容易冲动（就是说被交易的兴奋情绪所左右）？你是否有个人方面的冲突（就是说在你的家庭生活、工作或过去的交易经历中，是否遇到过冲突）？你是否经常会突然出现情绪上的问题，比如恐惧或气愤？<br>我当然不认为自己是很容易冲动的。我一点也不觉得交易是很令人兴奋的，它对我来说只是一份工作，我仅仅是把交易当做一种有趣的大脑运动。我想自己没有过什么冲突，我的家庭生活非常稳定，另外，我也很少生气或有挫败感。我过去会时不时地非常紧张，但是我在你的一次研讨会上明白了，紧张之前的征兆是什么。就我来说，我的手指会首先变得紧张，一旦我清醒地意识到了这一点，就会自动进入一种放松状态。现在对我来说这已经非常自然，以至于我甚至注意不到。<br>根据你的个人资源状况，你需要在着手交易之前学习什么，完成什么或解决什么？你会怎样去做？<br>我认为我的资源过去是，现在也是非常雄厚的。我能够交易得很好。</p>
</blockquote>
<p>我希望对于那些有很多问题要解决的人来说，这种资源列举对你会有所启迪。在着手开发一个交易系统之前，你确实需要先仔细想想所有这些方面。为什么？因为一个好的交易系统的精髓就是找到一个最适合你的系统!</p>
<h2 id="界定你的目标"><a href="#界定你的目标" class="headerlink" title="界定你的目标"></a><span style="color:#00ACC1;">界定你的目标</span></h2><p>这一部分可能是交易系统开发中最重要的了。只有知道自己想去哪儿，你才能到达那里，因此，开发交易系统的大部分时间都应该用来开发你的目标。</p>
<p>个人投资者与资金管理者的目标应该区别对待。由于汤姆身兼两职，所以两方面的问题我都问了他，先是有关个人投资者的问题。</p>
<p>（1）个人投资者的目标</p>
<blockquote>
<p>你在交易方面的优势是什么？在交易时，你能给出一些优势的具体例子是什么？ （如果你不知道，第5章会详细讨论各种概念。）<br>战略思考是我们的优势，因为很多人不这么做。在耐心和公正方面我们也有优势，很多人既不耐心也不公正。计算机编程也是我们的优势之一，大多数人还不能达到我们的水平。长期自动趋势跟踪是我们这一优势的成果。<br>你个人有多少资产？其中有多少你能输得起？比如，大多数基金在亏损50%时会停止交易。你呢？在一次交易中你能承受多少风险？<br>我有几百万美元，输掉其中的25%不会对我构成任何威胁。我所有的钱都在交易里，而且我们每次交易只承担0.8%-1.0%的风险。如果我是在为我个人交易的话，我会冒1%-1.5%的风险。我认为2%-3%的风险就会捆住我的手脚，一部分原因是我可能同时在20个市场上进行交易。<br>你每年需要赚多少钱？你需要靠那些钱生活吗？如果你赚的钱不够生活怎么办？你能赚到超过你生活所需的钱，从而使得你的交易资本有所增长吗？你能经受为支付每月的账单而从你的交易资本中定期取钱吗？<br>我的收入来自Trendstat付给我的工资，因此我不指望我的交易收入。它只是我的第二收入。<br>我知道这个问题不适合你，但我还是想问一下，因为它是有关目标的标准问题之一。你很现实吗，或者说你期望像世界上最好的交易商那样进行交易吗？比方说，假如你有一个非常好的系统，它有一半时间是对的，并且给你带来的盈利是亏损的两倍。在这一系统下，你也可能轻易地连亏10次。你的系统仍然按照预期的那样工作，可是你可能很轻易地连亏了10次，你能忍受这样的系统吗？<br>我想我对回报和风险是非常现实的。我也知道什么是连亏10次，我以前也曾经历过，因此我知道这是意料之中的事。你有没有时间进行短期交易？<br>我每天有6个小时的时间花在交易上，其余的时间我用在特定的事情和个人事务上。我不打算进行短期交易，因此这对我不是一个问题。你需要多少社会交往？<br>不需要很多，但我确实很喜欢。<br>你可以日复一日地一个人工作吗？你需要有一两个人在身边，或者需要一大堆人在身边吗？那些人对你的影响有多大？<br>我在Trendstat有全体的职员，但我并不需要他们非得在我身边。我可以轻松地独自工作，就交易模式早期开发方面而言，他们对我没有任何影响。总的说来，你每年期望赚到交易资本的百分之多少？大约20%-40%。<br>为了达到这个目标，你愿意承受什么样的风险水平？<br>大约一半的潜在收入，因此一年中最多亏损大约20%。你愿意忍受的从最高点到最低点的最大跌幅是多少？25%左右。<br>你是怎样知道自己的计划是有效的，怎样知道它什么时候是无效的？在各科市场上，你对系统的期望是什么？是有趋势型的，巩固型的，还是高度可变型的？我对任何事情都做计划。我先设定最坏的情形，然后把它当做练习来演练一遍。我对每一情形最好和最坏的情况都做了明确界定，因此，当有情况出现时我通常已经为之做好了计划，对其结果有一个期望范围。如果结果在这一范围那么我知道一切都在按计划运行；如果结果是在这一范围之外，那么就需要做些调整。我就会介入系统，研究问题出在哪儿。<br>一般来说，我期望的最高回报率是40%，最低是10% ，平均是15%～25%；<br>我预计的最坏的损失是25%。<br>我记得有一年回报率超过了40%。我很高兴，因为这超出了我的期望极限，但它也告诉我风险太大了，这意味着我在亏损的方向上也有可能超出期望范围。因此，我就介入系统减少风险，以使最坏的亏损情形不会发生。</p>
</blockquote>
<p>（2）交易顾问的目标</p>
<blockquote>
<p>现在我想知道你作为一个交易经理的目标。你想要什么样的客户？散户、几个好朋友、几个把钱投到你们这儿的联合经营人还是非常老练的交易员？<br>我们想要的是有合理目标的客户。我们的目标是保持在规模上居世界前100位公司的位置，因此我们会接受那些能让我们实现这个目标的各类客户。我们既有散户，也有机构客户。他们在有些方面有所不同，在其他方面又是相同的，但两种客户对我们来说都不错。<br>你的客户怎么样？他们的目标是什么？你们为他们提供什么样的服务？比如，他们把钱投到你们这儿，是否是在努力实现某种特别的分散化？<br>客户当然是在寻求分散化，我们以四种不同的项目来满足其分散化的需求，这些项目努力为他们实现10%～20%的回报和较低的亏损。我们现在正在寻找一种有20%的回报率但只有10%的亏损率的项目。客户知道这一计划，这也正是他们要实现的目标。<br>既然你是在用客户的钱进行交易，那么他们能够承受多大的风险？他们什么时候有可能会撤资？<br>他们希望风险在5%-10%的范围内。任何超过15%或者持续一年的亏损都是致命的，那样，很多客户都会炒我们的鱿鱼。那么，赚多少钱会令他们兴奋不已呢？<br>超过25%的收益肯定会引人注目，但我们不希望太高，否则客户就会以为可以一步登天，他们会指望这种情形继续下去。<br>你们都收取什么费用？换句话说，每个季度或每个月你们从客户的账户中一共扣掉多少钱？为了能让付出这些费用的客户满意，你们必须实现怎样的回报？<br>我们收取2%的管理费和20%的激励费。只要在扣除这些费用之后能实现15%-20%的回报，或者损失不会令他们过于难受，他们就乐于付出这些费用。<br>你们的交易能力有多大？你们期望如何去实现这一能力？在实现之后你们期望做什么？它将如何改变你们的交易？<br>我们的交易能力在10亿-20亿美元左右。我们希望通过对银行、大公共基金经营人和具有高净值的个人的营销来实现这一目标，在达到交易能力之后，就不会再接受新的资金注入。随着我们的成长，交易需要在少数几个交易市场上持续地加以巩固。<br>在与客户关系方面可能发生的最坏情形是什么？你们如何防备这种最坏情形的发生？<br>对客户来说，可能发生的最坏的事情就是让他大吃一惊。我们通过培养客户来确保不会发生类似事件。为此，我甚至还写过一本书，即《防恐慌投责》 （Pan-ic Proof Investing）。<br>你如何处理大量新的资金注入或者大规模的撤资？</p>
</blockquote>
<p>大量新的资金注入已在我们的程序中给予考虑了，对大规模的撒资，我们开发的软件可以轻松地加以处理。</p>
<p>正如你所看到的，汤姆，巴索对其交易程序的每一个细节都进行了精心筹划，这就是为什么此类练习如此重要的原因，它会让你考虑一些如果不做此类练习你就根本不可能想到的问题。</p>
<p>3，交易观念</p>
<p>最后一部分具体分析你想怎样进行交易，这和有关市场、入市、撤市以及资金管理的观念有关，也就是交易计划的具体细节。</p>
<blockquote>
<p>汤姆，你想在什么样的市场上交易？进行专业化操作合适吗？你是只想在流动市场上交易呢，还是愿意在一些固定市场上交易？<br>我不是一个专业化的交易商，而是一个多面手。我在20个期货市场、15个外汇市场和30个共同基金市场上都有交易。所有这些市场流动性都很强，因为我只专注于流动市场。如果我不专注于这些流动市场，交易能力就会非常有限，就不会是我们现在瞄准的几十亿美元。<br>你对入市有什么信念？你认为入市有多重要？<br>入市可能是我的交易系统中最不重要的部分。在市场有趋势变化时，我就想入市。也就是在趋势有所变化的那短短一瞬间，回报一风险比率在之后的交易中会是最好的。<br>在回报与亏损方面给定目标之后，你想要什么样的初始风险停价信号？如果现在收盘，你是否能够及时返回市场从而不会错过任何一次移动？<br>在我看来，停止交易应该是对我最初之所以想进入市场交易的违背。不过，我总会有办法返回市场的。<br>我停止交易的决定完全根据市场的表现，看市场怎样变化。它只是间接地与风险有关—-风险太大以至不能持有头寸。我把风险控制当做确定头寸规模的一部分，我想你一会儿就会问到这个问题。<br>你如何计划实现盈利？是反转止损、跟踪止损、技术止损还是设定价格目标？与流行的观念相反，你的重点应该是放在止损和市场退出方面。<br>我并不限制自己在一笔交易中可以获利的界限，我的交易哲学是让盈利滚动起来。如果我能找到一笔交易一直朝着我设想的方向前进，以至于我根本不需要退出，那就太棒了!<br>你在确定头寸规模方面如何把握？<br>我设置了一组工具，用来在设定的风险和相当于资本的一定百分比的波动限度内进行交易。我对起始风险和波动幅度进行监控，以确保它们被控制在设定的限度内。另外，我将当前的风险和波动幅度保持在资本的一个固定百分比水平上。因此，我始终能够了解资产组合在一夜之间可能发生多大的波动，它不会大到令我无法安然入睡。</p>
</blockquote>
<p>现在也许你能够理解，为什么设定目标对开发一个交易系统来说是那么重要。如果你真的理解了，那么这一章的目的就达到了，本章下面的内容就是给你机会来回答以上相同的问题。</p>
<p>你花几分钟时间很容易回答这些问题，有些人甚至不用回答，但关键在于花点时间认真考虑一下这些题目所提出来的观点。这就是为什么这一部分应该占交易准备任务50%的原因。</p>
<h1 id="设定你自己的目标"><a href="#设定你自己的目标" class="headerlink" title="设定你自己的目标"></a><span style="color:#339AFF;">设定你自己的目标</span></h1><p>1，自我评估</p>
<p>你每天必须在交易上花多少时间？ （这很重要，因为有多少时间可以利用几乎决定了你必须开发什么样的交易系统。那些有全职工作，只是每晚看一下市场的人，显然必须找到一个相当长期的系统来使用。）在你交易时，你能料到会有多少分心的事情？<br>你预计要多少时间来开发你的交易系统，处理个人心理工作以及制订进行交易的业务计划？<br>你的电脑技能怎么样？在你开始从事交易事业之前需要什么样的技能？你对统计学了解多少？<br>你对自己的市场知识如何评价？ （这里的市场知识应该包括交易机制，是什么在推动市场，如何低成本有效地执行订单以及你可能需要哪些交易指标等方面的知识。）<br>你的心理优势和弱势是什么？尤其是在交易系统开发方面。你在自我约束方面的优势和弱势是什么？<br>你会不会很容易冲动（就是说被交易的兴奋情绪所左右），你是否有个人方面的冲突（就是说在你的家庭生活、工作或过去的交易经历中，是否遇到过冲突），你是否经常会突然出现情绪上的问题，比如恐惧或气愤？<br>根据你的个人资源状况，你需要在着手交易之前学习什么，完成什么或解决什么？你会怎样去做？</p>
<p>在着手开发一个交易系统之前，你真的需要先仔细想想所有这些方面。记住，一个好的交易系统的精髓就是找到一个最适合你的系统!</p>
<p>2，界定你的目标</p>
<p>这一部分可能是交易系统开发中最重要的了。只有知道自己想去哪儿，你才能到达那里，因此，开发交易系统的大部分时间应该是用来开发目标。</p>
<p>（1）个人投资者的目标</p>
<p>你在交易方面的优势是什么？在交易时，你能给出一些优势的具体例子是什么？ （如果你不知道，第5章会详细讨论各种的概念。想想所提出的问题并回答。）<br>你个人有多少资产？其中有多少你能输得起？比如，大多数基金在亏损50%时会停止交易。你呢？在一次交易中你能承受多少风险？你每年需要赚多少钱？你需要靠那些钱生活吗？<br>如果你赚的钱不够生活怎么办？你能赚到超过你生活所需的钱，从而使得你的交易资本有所增长吗？你能经受为支付每月的账单而从交易资本中定期取钱吗？<br>你很现实吗，或者说你期望像世界上最好的交易商那样进行交易吗？比方说，假如你有一个非常好的系统，它有一半时间是对的，并且给你带来的盈利是亏损的两倍。在这一系统下，你也可能轻易地连亏10次。你的系统仍然按照预期的那样工作，可是你可能很轻易地连亏了10次，你能忍受这样的系统吗？你有没有时间进行短期交易？你需要多少社会交往？<br>你可以日复一日地一个人工作吗？你需要有一两个人在身边，或者需要一大堆人在身边吗？那些人对你的影响有多大？<br>总的说来，你每年期望赚到交易资本的百分之多少？为了达到这个目标，你愿意承受什么样的风险水平？你愿意忍受的从最高点到最低点的最大跌幅是多少？<br>你是怎样知道自己的计划是有效的，怎样知道它什么时候是无效的？在各种市场上，你对系統的期望是什么？是有趋势型的，巩固型的，还是高度可变型的？</p>
<p>（2）交易顾问的目标</p>
<p>下面是那些想成为交易经理的目标问题。</p>
<p>你想要什么样的客户？散户、几个好朋友、几个把钱投到你们这儿的联合经营人，非常老练的交易员还是机构客户？<br>你的客户怎么样？他们的目标是什么？你为他们提供什么样的服务？比如，他们把钱投到你这儿，是否是在努力实现某种特别的分散化？<br>既然你是在用客户的钱进行交易，那么他们能够承受多大的风险？他们什么时候有可能会撤资？<br>那么，赚多少钱会令他们兴奋不已呢？<br>你都收取什么费用？换句话说，每个季度或每个月你从客户的账户中一共扣掉多少钱？为了能让付出这些费用的客户满意，你必须实现怎样的回报？<br>你的交易能力有多大？你期望如何去实现这一能力？在实现之后你期望做什么？它将如何改变你的交易？<br>在与客户关系方面可能发生的最坏情形是什么？你会如何防备这种最坏情形的发生？你会如何处理客户的问题或问题客户？<br>你如何处理大量新的资金注入或者大规模的撤资？</p>
<h2 id="交易观念"><a href="#交易观念" class="headerlink" title="交易观念"></a><span style="color:#00ACC1;">交易观念</span></h2><p>最后一部分具体分析你想怎样进行交易。这和有关市场、入市、撤市以及资金管理的观念有关，也就是交易计划的具体细节。</p>
<blockquote>
<p>你想在什么样的市场上交易？专业化合适吗？你是只想在流动市场上交易呢，还是愿意在一些固定市场上交易？<br>在入市前你需要准备什么条件吗？如果需要，你需要什么条件？（汤姆没有回答这个问题，但这个问题对你是有用的。）<br>你对入市有什么信念？你认为入市有多重要？<br>在回报与亏损方面给定目标之后，你想要什么样的初始风险停价信号？如果现在收盘，你是否能够及时返回市场从而不会错过任何一次移动？ （换句话说，就是讨论一下你打算设定什么样的止损方式。）<br>你如何计划实现盈利？是反转止损、跟踪止损、技术止损还是设定价格目标？与流行的观念相反，你的重点应该放在止损和市场退出方面。<br>你在确定头寸规模方面如何把握？（给出你对这个问题可能会有的任何具体想法。）</p>
</blockquote>
<p>这些都是需要你认真考虑的最重要的问题。</p>
<!-- flag of hidden posts -->
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/通向财务自由之路/" rel="tag"># 通向财务自由之路</a>
          
        </div>
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="CheBin">
            
              <p class="site-author-name" itemprop="name">CheBin</p>
              <div class="site-description motion-element" itemprop="description">看视频才能学会，看文字学不会的</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">1017</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">72</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          


          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <!-- modify icon to fire by szw -->
                <i class="fa fa-history fa-" aria-hidden="true"></i>
                近期文章
              </div>
              <ul class="links-of-blogroll-list">
                
                
                  <li>
                    <a href="/2023/04/04/结束语｜秒杀系统之上的业务协同思考/" title="结束语｜秒杀系统之上的业务协同思考" target="_blank">结束语｜秒杀系统之上的业务协同思考</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/14｜百万级流量秒杀系统的关键总结/" title="14｜百万级流量秒杀系统的关键总结" target="_blank">14｜百万级流量秒杀系统的关键总结</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/13｜优化番外篇：Vertx介绍及快速入门/" title="13｜优化番外篇：Vertx介绍及快速入门" target="_blank">13｜优化番外篇：Vertx介绍及快速入门</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/12｜高性能优化：单机Java极致优化/" title="12｜高性能优化：单机Java极致优化" target="_blank">12｜高性能优化：单机Java极致优化</a>
                  </li>
                
                  <li>
                    <a href="/2023/04/04/11｜高性能优化：物理机极致优化/" title="11｜高性能优化：物理机极致优化" target="_blank">11｜高性能优化：物理机极致优化</a>
                  </li>
                
              </ul>
            </div>
        

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#设计目标是系统工作的主要部分"><span class="nav-number">1.</span> <span class="nav-text">设计目标是系统工作的主要部分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#汤姆·巴索与目标"><span class="nav-number">2.</span> <span class="nav-text">汤姆·巴索与目标</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#自我评估"><span class="nav-number">2.1.</span> <span class="nav-text">自我评估</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#界定你的目标"><span class="nav-number">2.2.</span> <span class="nav-text">界定你的目标</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设定你自己的目标"><span class="nav-number">3.</span> <span class="nav-text">设定你自己的目标</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#交易观念"><span class="nav-number">3.1.</span> <span class="nav-text">交易观念</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2023</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CheBin</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">8.2m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">124:48</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
